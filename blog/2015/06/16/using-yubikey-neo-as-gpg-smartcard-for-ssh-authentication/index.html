
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using YubiKey Neo as Gpg Smartcard for SSH Authentication - stafwag Blog</title>
  <meta name="author" content="staf wagemakers">

  
  <meta name="description" content="Using YubiKey Neo as Gpg Smartcard for SSH Authentication Jun 16th, 2015 10:32 am I purchased a Yubi NEO I&rsquo;ll use it to hold my Luks password &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stafwag.github.io/blog/blog/2015/06/16/using-yubikey-neo-as-gpg-smartcard-for-ssh-authentication/">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/blog/atom.xml" rel="alternate" title="stafwag Blog" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37258385-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">stafwag Blog</a></h1>
  
    <h2>staf wagemakers blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="stafwag.github.io/blog">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Using YubiKey Neo as Gpg Smartcard for SSH Authentication</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-16T10:32:00+02:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:32 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I purchased a <a href="https://www.yubico.com/products/yubikey-hardware/">Yubi NEO</a> I&rsquo;ll use it to hold my  <a href="https://en.wikipedia.org/wiki/Linux_Unified_Key_Setup">Luks</a> password and for ssh authentication instead of the password authentication that I still use.</p>

<p>You&rsquo;ll find  my journey to get the smartcard interface working with ssh on a fedora 22 system below;</p>

<h2>Install the yubiclient and smartcard software</h2>

<h3>Install the ykclient</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ykclient.x86_64 : Yubikey management library and client
</span><span class='line'>[root@vicky ~]# dnf install ykclient
</span><span class='line'>Last metadata expiration check performed 1:00:07 ago on Sun Jun 14 09:14:34 2015.
</span><span class='line'>Dependencies resolved.
</span><span class='line'>====================================================================================================================
</span><span class='line'> Package                    Arch                     Version                         Repository                Size
</span><span class='line'>====================================================================================================================
</span><span class='line'>Installing:
</span><span class='line'> ykclient                   x86_64                   2.13-1.fc22                     fedora                    35 k
</span><span class='line'>
</span><span class='line'>Transaction Summary
</span><span class='line'>====================================================================================================================
</span><span class='line'>Install  1 Package
</span><span class='line'>
</span><span class='line'>Total download size: 35 k
</span><span class='line'>Installed size: 58 k
</span><span class='line'>Is this ok [y/N]: y
</span><span class='line'>Downloading Packages:
</span><span class='line'>ykclient-2.13-1.fc22.x86_64.rpm                                                      48 kB/s |  35 kB     00:00    
</span><span class='line'>--------------------------------------------------------------------------------------------------------------------
</span><span class='line'>Total                                                                                11 kB/s |  35 kB     00:03     
</span><span class='line'>Running transaction check
</span><span class='line'>Transaction check succeeded.
</span><span class='line'>Running transaction test
</span><span class='line'>Transaction test succeeded.
</span><span class='line'>Running transaction
</span><span class='line'>  Installing  : ykclient-2.13-1.fc22.x86_64                                                                     1/1 
</span><span class='line'>  Verifying   : ykclient-2.13-1.fc22.x86_64                                                                     1/1 
</span><span class='line'>
</span><span class='line'>Installed:
</span><span class='line'>  ykclient.x86_64 2.13-1.fc22                                                                                       
</span><span class='line'>
</span><span class='line'>Complete!
</span><span class='line'>[root@vicky ~]# </span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@vicky ~]# ykinfo
</span><span class='line'>bash: ykinfo: command not found...
</span><span class='line'>Install package 'ykpers' to provide command 'ykinfo'? [N/y] ^C
</span><span class='line'>
</span><span class='line'>[root@vicky ~]# dnf install ykpers
</span><span class='line'>Last metadata expiration check performed 1:01:23 ago on Sun Jun 14 09:14:34 2015.
</span><span class='line'>Dependencies resolved.
</span><span class='line'>====================================================================================================================
</span><span class='line'> Package                     Arch                    Version                          Repository               Size
</span><span class='line'>====================================================================================================================
</span><span class='line'>Installing:
</span><span class='line'> libyubikey                  x86_64                  1.11-3.fc22                      fedora                   33 k
</span><span class='line'> ykpers                      x86_64                  1.17.1-1.fc22                    fedora                  101 k
</span><span class='line'>
</span><span class='line'>Transaction Summary
</span><span class='line'>====================================================================================================================
</span><span class='line'>Install  2 Packages
</span><span class='line'>
</span><span class='line'>Total download size: 135 k
</span><span class='line'>Installed size: 372 k
</span><span class='line'>Is this ok [y/N]: y
</span><span class='line'>Downloading Packages:
</span><span class='line'>(1/2): libyubikey-1.11-3.fc22.x86_64.rpm                                             13 kB/s |  33 kB     00:02    
</span><span class='line'>(2/2): ykpers-1.17.1-1.fc22.x86_64.rpm                                               38 kB/s | 101 kB     00:02    
</span><span class='line'>--------------------------------------------------------------------------------------------------------------------
</span><span class='line'>Total                                                                                22 kB/s | 135 kB     00:06     
</span><span class='line'>Running transaction check
</span><span class='line'>Transaction check succeeded.
</span><span class='line'>Running transaction test
</span><span class='line'>Transaction test succeeded.
</span><span class='line'>Running transaction
</span><span class='line'>  Installing  : libyubikey-1.11-3.fc22.x86_64                                                                   1/2 
</span><span class='line'>  Installing  : ykpers-1.17.1-1.fc22.x86_64                                                                     2/2 
</span><span class='line'>  Verifying   : ykpers-1.17.1-1.fc22.x86_64                                                                     1/2 
</span><span class='line'>  Verifying   : libyubikey-1.11-3.fc22.x86_64                                                                   2/2 
</span><span class='line'>
</span><span class='line'>Installed:
</span><span class='line'>  libyubikey.x86_64 1.11-3.fc22                             ykpers.x86_64 1.17.1-1.fc22                            
</span><span class='line'>
</span><span class='line'>Complete!
</span></code></pre></td></tr></table></div></figure>


<h3>Verify that you&rsquo;ve access to the yubikey</h3>

<p>&ldquo;ykinfo -v&rdquo; shows you the version on the yubikey.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@vicky ~]# ykinfo -v
</span><span class='line'>version: 3.4.0
</span><span class='line'>[root@vicky ~]# 
</span></code></pre></td></tr></table></div></figure>


<p>If you try with the user that you&rsquo;ll for the yubi authentication you might get a permission denied:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>staf@vicky ~]$ ykinfo -v
</span><span class='line'>USB error: Access denied (insufficient permissions)
</span><span class='line'>[staf@vicky ~]$ </span></code></pre></td></tr></table></div></figure>


<h4>Update the udev permissions</h4>

<h5>Update rule file</h5>

<p>On a fedora 22 system to udev rules for the yubi key are defined in &ldquo;/usr/lib/udev/rules.d/69-yubikey.rules&rdquo;</p>

<p>It is a good practice to only grant access to user that will use the yubikey.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@vicky ~]# cd /usr/lib/udev/rules.d/
</span><span class='line'>[root@vicky rules.d]# vi 69-yubikey.rules </span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ACTION!="add|change", GOTO="yubico_end"
</span><span class='line'>
</span><span class='line'># Udev rules for letting the console user access the Yubikey USB
</span><span class='line'># device node, needed for challenge/response to work correctly.
</span><span class='line'>
</span><span class='line'># Yubico Yubikey II
</span><span class='line'>ATTRS{idVendor}=="1050", ATTRS{idProduct}=="0010|0110|0111|0114|0116|0401|0403|0405|0407|0410", OWNER="staf", MODE="0600"
</span><span class='line'>
</span><span class='line'>LABEL="yubico_end"</span></code></pre></td></tr></table></div></figure>


<h5>Update udev rules</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># udevadm control --reload
</span><span class='line'># udevadm trigger</span></code></pre></td></tr></table></div></figure>


<h5>Test it again</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ ykinfo -v
</span><span class='line'>version: 3.4.0
</span><span class='line'>[staf@vicky ~]$ </span></code></pre></td></tr></table></div></figure>


<h3>Enable the smartcard interface</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>staf@vicky yubi]$ ykpersonalize -m82
</span><span class='line'>Firmware version 3.4.0 Touch level 1551 Program sequence 3
</span><span class='line'>
</span><span class='line'>The USB mode will be set to: 0x82
</span><span class='line'>
</span><span class='line'>Commit? (y/n) [n]: y
</span><span class='line'>[staf@vicky yubi]$ 
</span></code></pre></td></tr></table></div></figure>


<p>Remove the yubi key from your system and plug it back to activate the new interface.</p>

<h3>Install the required smartcard software</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@vicky ~]# dnf install pcsc-tools   
</span><span class='line'>Last metadata expiration check performed 0:33:58 ago on Sun Jun 14 09:14:34 2015.
</span><span class='line'>Dependencies resolved.                                       
</span><span class='line'>====================================================================================================================
</span><span class='line'> Package                         Arch                  Version                          Repository             Size
</span><span class='line'>====================================================================================================================
</span><span class='line'>Installing:                                                 
</span><span class='line'> pcsc-lite                       x86_64                1.8.13-1.fc22                    fedora                101 k
</span><span class='line'> pcsc-lite-asekey                x86_64                3.7-1.fc22                       fedora                 34 k
</span><span class='line'> pcsc-perl                       x86_64                1.4.12-11.fc22                   fedora                 61 k
</span><span class='line'> pcsc-tools                      x86_64                1.4.23-1.fc22                    fedora                116 k
</span><span class='line'> perl-Cairo                      x86_64                1.105-1.fc22                     fedora                126 k
</span><span class='line'> perl-Glib                       x86_64                1.310-1.fc22                     fedora                362 k
</span><span class='line'> perl-Gtk2                       x86_64                1.2495-1.fc22                    fedora                1.8 M
</span><span class='line'> perl-HTML-Tree                  noarch                1:5.03-8.fc22                    fedora                223 k
</span><span class='line'> perl-Pango                      x86_64                1.226-3.fc22                     fedora                220 k
</span><span class='line'>                                                           
</span><span class='line'>Transaction Summary                                        
</span><span class='line'>====================================================================================================================
</span><span class='line'>Install  9 Packages                                        
</span><span class='line'>                                                            
</span><span class='line'>Total download size: 3.0 M                                  
</span><span class='line'>Installed size: 8.4 M                                       
</span><span class='line'>Is this ok [y/N]: y                                          
</span><span class='line'>Downloading Packages:                                        
</span><span class='line'>(1/9): pcsc-tools-1.4.23-1.fc22.x86_64.rpm                                           38 kB/s | 116 kB     00:03    
</span><span class='line'>(2/9): pcsc-perl-1.4.12-11.fc22.x86_64.rpm                                           20 kB/s |  61 kB     00:03    
</span><span class='line'>(3/9): pcsc-lite-1.8.13-1.fc22.x86_64.rpm                                            23 kB/s | 101 kB     00:04    
</span><span class='line'>(4/9): perl-Glib-1.310-1.fc22.x86_64.rpm                                            159 kB/s | 362 kB     00:02    
</span><span class='line'>(5/9): perl-Cairo-1.105-1.fc22.x86_64.rpm                                            56 kB/s | 126 kB     00:02    
</span><span class='line'>(6/9): perl-HTML-Tree-5.03-8.fc22.noarch.rpm                                         99 kB/s | 223 kB     00:02    
</span><span class='line'>(7/9): perl-Gtk2-1.2495-1.fc22.x86_64.rpm                                           342 kB/s | 1.8 MB     00:05    
</span><span class='line'>(8/9): perl-Pango-1.226-3.fc22.x86_64.rpm                                            89 kB/s | 220 kB     00:02    
</span><span class='line'>(9/9): pcsc-lite-asekey-3.7-1.fc22.x86_64.rpm                                        21 kB/s |  34 kB     00:01    
</span><span class='line'>--------------------------------------------------------------------------------------------------------------------
</span><span class='line'>Total                                                                               257 kB/s | 3.0 MB     00:11     
</span><span class='line'>Running transaction check                                   
</span><span class='line'>Transaction check succeeded.                                
</span><span class='line'>Running transaction test                                     
</span><span class='line'>Transaction test succeeded.                                   
</span><span class='line'>Running transaction                                             
</span><span class='line'>  Installing  : perl-Glib-1.310-1.fc22.x86_64                                                                   1/9 
</span><span class='line'>  Installing  : pcsc-lite-asekey-3.7-1.fc22.x86_64                                                              2/9 
</span><span class='line'>  Installing  : pcsc-lite-1.8.13-1.fc22.x86_64                                                                  3/9 
</span><span class='line'>  Installing  : perl-Cairo-1.105-1.fc22.x86_64                                                                  4/9 
</span><span class='line'>  Installing  : perl-Pango-1.226-3.fc22.x86_64                                                                  5/9 
</span><span class='line'>  Installing  : perl-HTML-Tree-1:5.03-8.fc22.noarch                                                             6/9 
</span><span class='line'>  Installing  : perl-Gtk2-1.2495-1.fc22.x86_64                                                                  7/9 
</span><span class='line'>  Installing  : pcsc-perl-1.4.12-11.fc22.x86_64                                                                 8/9 
</span><span class='line'>  Installing  : pcsc-tools-1.4.23-1.fc22.x86_64                                                                 9/9 
</span><span class='line'>  Verifying   : pcsc-tools-1.4.23-1.fc22.x86_64                                                                 1/9 
</span><span class='line'>  Verifying   : pcsc-lite-1.8.13-1.fc22.x86_64                                                                  2/9 
</span><span class='line'>  Verifying   : pcsc-perl-1.4.12-11.fc22.x86_64                                                                 3/9 
</span><span class='line'>  Verifying   : perl-Glib-1.310-1.fc22.x86_64                                                                   4/9 
</span><span class='line'>  Verifying   : perl-Gtk2-1.2495-1.fc22.x86_64                                                                  5/9 
</span><span class='line'>  Verifying   : perl-Cairo-1.105-1.fc22.x86_64                                                                  6/9 
</span><span class='line'>  Verifying   : perl-HTML-Tree-1:5.03-8.fc22.noarch                                                             7/9 
</span><span class='line'>  Verifying   : perl-Pango-1.226-3.fc22.x86_64                                                                  8/9 
</span><span class='line'>  Verifying   : pcsc-lite-asekey-3.7-1.fc22.x86_64                                                              9/9 
</span><span class='line'>
</span><span class='line'>Installed:
</span><span class='line'>  pcsc-lite.x86_64 1.8.13-1.fc22       pcsc-lite-asekey.x86_64 3.7-1.fc22       pcsc-perl.x86_64 1.4.12-11.fc22     
</span><span class='line'>  pcsc-tools.x86_64 1.4.23-1.fc22      perl-Cairo.x86_64 1.105-1.fc22           perl-Glib.x86_64 1.310-1.fc22       
</span><span class='line'>  perl-Gtk2.x86_64 1.2495-1.fc22       perl-HTML-Tree.noarch 1:5.03-8.fc22      perl-Pango.x86_64 1.226-3.fc22      
</span><span class='line'>
</span><span class='line'>Complete!
</span><span class='line'>[root@vicky ~]# 
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@vicky ~]# dnf install opensc
</span><span class='line'>Last metadata expiration check performed 0:37:38 ago on Sun Jun 14 09:14:34 2015.
</span><span class='line'>Dependencies resolved.
</span><span class='line'>====================================================================================================================
</span><span class='line'> Package                  Arch                     Version                           Repository                Size
</span><span class='line'>====================================================================================================================
</span><span class='line'>Installing:
</span><span class='line'> opensc                   x86_64                   0.14.0-2.fc22                     fedora                   976 k
</span><span class='line'>
</span><span class='line'>Transaction Summary
</span><span class='line'>====================================================================================================================
</span><span class='line'>Install  1 Package
</span><span class='line'>
</span><span class='line'>Total download size: 976 k
</span><span class='line'>Installed size: 2.8 M
</span><span class='line'>Is this ok [y/N]: y
</span><span class='line'>Downloading Packages:
</span><span class='line'>opensc-0.14.0-2.fc22.x86_64.rpm                                                     277 kB/s | 976 kB     00:03    
</span><span class='line'>--------------------------------------------------------------------------------------------------------------------
</span><span class='line'>Total                                                                               203 kB/s | 976 kB     00:04     
</span><span class='line'>Running transaction check
</span><span class='line'>Transaction check succeeded.
</span><span class='line'>Running transaction test
</span><span class='line'>Transaction test succeeded.
</span><span class='line'>Running transaction
</span><span class='line'>  Installing  : opensc-0.14.0-2.fc22.x86_64                                                                     1/1 
</span><span class='line'>  Verifying   : opensc-0.14.0-2.fc22.x86_64                                                                     1/1 
</span><span class='line'>
</span><span class='line'>Installed:
</span><span class='line'>  opensc.x86_64 0.14.0-2.fc22                                                                                       
</span><span class='line'>
</span><span class='line'>Complete!
</span><span class='line'>[root@vicky ~]# dnf search opensc</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@vicky ~]# dnf search ccid
</span><span class='line'>Last metadata expiration check performed 0:39:03 ago on Sun Jun 14 09:14:34 2015.
</span><span class='line'>================================================ N/S Matched: ccid =================================================
</span><span class='line'>pcsc-lite-ccid.x86_64 : Generic USB CCID smart card reader driver
</span><span class='line'>libykneomgr.i686 : YubiKey NEO CCID Manager C Library
</span><span class='line'>libykneomgr.x86_64 : YubiKey NEO CCID Manager C Library
</span><span class='line'>[root@vicky ~]# dnf install pcsc-lite-ccid
</span><span class='line'>Last metadata expiration check performed 0:39:34 ago on Sun Jun 14 09:14:34 2015.
</span><span class='line'>Dependencies resolved.
</span><span class='line'>====================================================================================================================
</span><span class='line'> Package                        Arch                   Version                         Repository              Size
</span><span class='line'>====================================================================================================================
</span><span class='line'>Installing:
</span><span class='line'> pcsc-lite-ccid                 x86_64                 1.4.18-1.fc22                   fedora                 177 k
</span><span class='line'>
</span><span class='line'>Transaction Summary
</span><span class='line'>====================================================================================================================
</span><span class='line'>Install  1 Package
</span><span class='line'>
</span><span class='line'>Total download size: 177 k
</span><span class='line'>Installed size: 599 k
</span><span class='line'>Is this ok [y/N]: y
</span><span class='line'>Downloading Packages:
</span><span class='line'>pcsc-lite-ccid-1.4.18-1.fc22.x86_64.rpm                                              47 kB/s | 177 kB     00:03    
</span><span class='line'>--------------------------------------------------------------------------------------------------------------------
</span><span class='line'>Total                                                                                27 kB/s | 177 kB     00:06     
</span><span class='line'>Running transaction check
</span><span class='line'>Transaction check succeeded.
</span><span class='line'>Running transaction test
</span><span class='line'>Transaction test succeeded.
</span><span class='line'>Running transaction
</span><span class='line'>  Installing  : pcsc-lite-ccid-1.4.18-1.fc22.x86_64                                                             1/1 
</span><span class='line'>  Verifying   : pcsc-lite-ccid-1.4.18-1.fc22.x86_64                                                             1/1 
</span><span class='line'>
</span><span class='line'>Installed:
</span><span class='line'>  pcsc-lite-ccid.x86_64 1.4.18-1.fc22                                                                               
</span><span class='line'>
</span><span class='line'>Complete!
</span><span class='line'>[root@vicky ~]# </span></code></pre></td></tr></table></div></figure>


<h4>Start the pcscd service</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@vicky ~]# systemctl list-unit-files -t service | grep pcscd
</span><span class='line'>pcscd.service                               static  
</span><span class='line'>[root@vicky ~]# systemctl start pcscd
</span><span class='line'>[root@vicky ~]# systemctl enable pcscd
</span><span class='line'>[root@vicky ~]# </span></code></pre></td></tr></table></div></figure>


<h4>Verify that you are able to see the yubi smartcard</h4>

<h5>Run pcsc_scan</h5>

<p>Execute &ldquo;pcsc_scan&rdquo; to verify that you see the smartcard</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ pcsc_scan 
</span><span class='line'>PC/SC device scanner
</span><span class='line'>V 1.4.23 (c) 2001-2011, Ludovic Rousseau &lt;ludovic.rousseau@free.fr&gt;
</span><span class='line'>Compiled with PC/SC lite version: 1.8.13
</span><span class='line'>Using reader plug'n play mechanism
</span><span class='line'>Scanning present readers...
</span><span class='line'>0: Gemalto Gemplus USB SmartCard Reader 433-Swap [CCID Interface] (1-0000:00:06.7-1) 00 00
</span><span class='line'>1: Yubico Yubikey NEO OTP+CCID 01 00
</span><span class='line'>
</span><span class='line'>Mon Jun 15 11:36:44 2015
</span><span class='line'>Reader 0: Gemalto Gemplus USB SmartCard Reader 433-Swap [CCID Interface] (1-0000:00:06.7-1) 00 00
</span><span class='line'>  Card state: Card removed, 
</span><span class='line'>Reader 1: Yubico Yubikey NEO OTP+CCID 01 00
</span><span class='line'>  Card state: Card inserted, 
</span><span class='line'>  ATR: 3B FC 13 00 00 81 31 FE 15 59 75 62 69 6B 65 79 4E 45 4F 72 33 E1
</span><span class='line'>
</span><span class='line'>defined(@array) is deprecated at /usr/lib64/perl5/vendor_perl/Chipcard/PCSC.pm line 69.
</span><span class='line'>        (Maybe you should just omit the defined()?)
</span><span class='line'>ATR: 3B FC 13 00 00 81 31 FE 15 59 75 62 69 6B 65 79 4E 45 4F 72 33 E1
</span><span class='line'>+ TS = 3B --&gt; Direct Convention
</span><span class='line'>+ T0 = FC, Y(1): 1111, K: 12 (historical bytes)
</span><span class='line'>  TA(1) = 13 --&gt; Fi=372, Di=4, 93 cycles/ETU
</span><span class='line'>    43010 bits/s at 4 MHz, fMax for Fi = 5 MHz =&gt; 53763 bits/s
</span><span class='line'>  TB(1) = 00 --&gt; VPP is not electrically connected
</span><span class='line'>  TC(1) = 00 --&gt; Extra guard time: 0
</span><span class='line'>  TD(1) = 81 --&gt; Y(i+1) = 1000, Protocol T = 1 
</span><span class='line'>-----
</span><span class='line'>  TD(2) = 31 --&gt; Y(i+1) = 0011, Protocol T = 1 
</span><span class='line'>-----
</span><span class='line'>  TA(3) = FE --&gt; IFSC: 254
</span><span class='line'>  TB(3) = 15 --&gt; Block Waiting Integer: 1 - Character Waiting Integer: 5
</span><span class='line'>+ Historical bytes: 59 75 62 69 6B 65 79 4E 45 4F 72 33
</span><span class='line'>  Category indicator byte: 59 (proprietary format)
</span><span class='line'>+ TCK = E1 (correct checksum)
</span><span class='line'>
</span><span class='line'>Possibly identified card (using /usr/share/pcsc/smartcard_list.txt):
</span><span class='line'>3B FC 13 00 00 81 31 FE 15 59 75 62 69 6B 65 79 4E 45 4F 72 33 E1
</span><span class='line'>        YubiKey NEO (PKI)
</span><span class='line'>        http://www.yubico.com/
</span></code></pre></td></tr></table></div></figure>


<h4>Remote smartcard access</h4>

<p>By default only console logins have access to the smartcard if you want to grant access to remote logins (e.g. ssh)
create a polkit rule for the user that will use the smartcard.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@vicky ~]# cd /usr/share/polkit-1/rules.d/                                    
</span><span class='line'>[root@vicky rules.d]# vi 30_smartcard_access.rules </span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>polkit.addRule(function(action, subject) {
</span><span class='line'>    if (action.id == "org.debian.pcsc-lite.access_pcsc" &&
</span><span class='line'>        subject.user == "staf") {
</span><span class='line'>            return polkit.Result.YES;
</span><span class='line'>    }
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>polkit.addRule(function(action, subject) {
</span><span class='line'>    if (action.id == "org.debian.pcsc-lite.access_card" &&
</span><span class='line'>        action.lookup("reader") == 'name_of_reader' &&
</span><span class='line'>        subject.user == "staf") {
</span><span class='line'>            return polkit.Result.YES;    }
</span><span class='line'>});
</span></code></pre></td></tr></table></div></figure>


<h3>Reset smartcard PIN codes</h3>

<p>The default user PIN code is &ldquo;123456&rdquo; the default admin PIN code is &ldquo;12345678&rdquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ gpg --change-pin 
</span><span class='line'>gpg: OpenPGP card no. D2760001240102000006035062250000 detected
</span><span class='line'>
</span><span class='line'>1 - change PIN
</span><span class='line'>2 - unblock PIN
</span><span class='line'>3 - change Admin PIN
</span><span class='line'>4 - set the Reset Code
</span><span class='line'>Q - quit
</span><span class='line'>
</span><span class='line'>#### Change user PIN
</span><span class='line'>
</span><span class='line'>Your selection? </span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Your selection? 1
</span><span class='line'>
</span><span class='line'>Please enter the PIN
</span><span class='line'>           
</span><span class='line'>New PIN
</span><span class='line'>               
</span><span class='line'>New PIN
</span><span class='line'>PIN changed.     
</span></code></pre></td></tr></table></div></figure>


<h4>Change admin PIN</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> - change PIN
</span><span class='line'>2 - unblock PIN
</span><span class='line'>3 - change Admin PIN
</span><span class='line'>4 - set the Reset Code
</span><span class='line'>Q - quit
</span><span class='line'>
</span><span class='line'>Your selection? 3
</span><span class='line'>gpg: 3 Admin PIN attempts remaining before card is permanently locked
</span><span class='line'>
</span><span class='line'>Please enter the Admin PIN
</span><span class='line'>                 
</span><span class='line'>New Admin PIN
</span><span class='line'>                     
</span><span class='line'>New Admin PIN
</span><span class='line'>PIN changed.     
</span><span class='line'>
</span><span class='line'>1 - change PIN
</span><span class='line'>2 - unblock PIN
</span><span class='line'>3 - change Admin PIN
</span><span class='line'>4 - set the Reset Code
</span><span class='line'>Q - quit
</span><span class='line'>
</span><span class='line'>Your selection? 
</span></code></pre></td></tr></table></div></figure>


<h3>Generate a new key pair</h3>

<h4>Execute &ldquo;gpg &ndash;card-edit&rdquo;</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ gpg --card-edit 
</span><span class='line'>
</span><span class='line'>Application ID ...: D2760001240102000006035062250000
</span><span class='line'>Version ..........: 2.0
</span><span class='line'>Manufacturer .....: unknown
</span><span class='line'>Serial number ....: 03506225
</span><span class='line'>Name of cardholder: [not set]
</span><span class='line'>Language prefs ...: [not set]
</span><span class='line'>Sex ..............: unspecified
</span><span class='line'>URL of public key : [not set]
</span><span class='line'>Login data .......: [not set]
</span><span class='line'>Signature PIN ....: forced
</span><span class='line'>Key attributes ...: 2048R 2048R 2048R
</span><span class='line'>Max. PIN lengths .: 127 127 127
</span><span class='line'>PIN retry counter : 3 3 3
</span><span class='line'>Signature counter : 5
</span><span class='line'>Signature key ....: 1E41 4C61 B1CE F02A F431  85BF 46B9 3657 54DF 802E
</span><span class='line'>      created ....: 2015-06-15 11:47:23
</span><span class='line'>Encryption key....: BB75 75F4 404A 2681 4331  4B46 34E7 EE51 4199 C702
</span><span class='line'>      created ....: 2015-06-15 11:47:23
</span><span class='line'>Authentication key: A7F8 A844 4762 C44D 20C7  A2AF E06D 602C 069D 7EFF
</span><span class='line'>      created ....: 2015-06-15 11:47:23
</span><span class='line'>General key info..: 
</span><span class='line'>pub  2048R/54DF802E 2015-06-15 qwerty &lt;qwert@qwert&gt;
</span><span class='line'>sec&gt;  2048R/54DF802E  created: 2015-06-15  expires: never     
</span><span class='line'>                      card-no: 0006 03506225
</span><span class='line'>ssb&gt;  2048R/069D7EFF  created: 2015-06-15  expires: never     
</span><span class='line'>                      card-no: 0006 03506225
</span><span class='line'>ssb&gt;  2048R/4199C702  created: 2015-06-15  expires: never     
</span><span class='line'>                      card-no: 0006 03506225
</span><span class='line'>
</span><span class='line'>gpg/card&gt; </span></code></pre></td></tr></table></div></figure>


<h4>Enable admin commands</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gpg/card&gt; admin
</span><span class='line'>Admin commands are allowed                                                      
</span><span class='line'>                                                                                
</span><span class='line'>gpg/card&gt;                                                                        </span></code></pre></td></tr></table></div></figure>


<h4>Generate key</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gpg/card&gt; generate 
</span><span class='line'>Make off-card backup of encryption key? (Y/n) n
</span><span class='line'>
</span><span class='line'>gpg: NOTE: keys are already stored on the card!
</span><span class='line'>
</span><span class='line'>Replace existing keys? (y/N) y
</span><span class='line'>
</span><span class='line'>Please note that the factory settings of the PINs are
</span><span class='line'>   PIN = `123456'     Admin PIN = `12345678'
</span><span class='line'>You should change them using the command --change-pin
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Please enter the PIN
</span><span class='line'>Please specify how long the key should be valid.
</span><span class='line'>         0 = key does not expire
</span><span class='line'>      &lt;n&gt;  = key expires in n days
</span><span class='line'>      &lt;n&gt;w = key expires in n weeks
</span><span class='line'>      &lt;n&gt;m = key expires in n months
</span><span class='line'>      &lt;n&gt;y = key expires in n years
</span><span class='line'>Key is valid for? (0) 
</span><span class='line'>Key does not expire at all
</span><span class='line'>Is this correct? (y/N) y
</span><span class='line'>
</span><span class='line'>You need a user ID to identify your key; the software constructs the user ID
</span><span class='line'>from the Real Name, Comment and Email Address in this form:
</span><span class='line'>    "Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"
</span><span class='line'>
</span><span class='line'>Real name: staf wagemakers
</span><span class='line'>Email address: staf@wagemakers.be
</span><span class='line'>Comment: 
</span><span class='line'>You selected this USER-ID:
</span><span class='line'>    "staf wagemakers &lt;staf@wagemakers.be&gt;"
</span><span class='line'>
</span><span class='line'>Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
</span><span class='line'>gpg: existing key will be replaced
</span><span class='line'>gpg: 3 Admin PIN attempts remaining before card is permanently locked
</span><span class='line'>
</span><span class='line'>Please enter the Admin PIN
</span><span class='line'>gpg: please wait while key is being generated ...
</span><span class='line'>gpg: key generation completed (5 seconds)
</span><span class='line'>gpg: signatures created so far: 0
</span><span class='line'>gpg: existing key will be replaced
</span><span class='line'>gpg: please wait while key is being generated ...
</span><span class='line'>gpg: key generation completed (35 seconds)
</span><span class='line'>gpg: signatures created so far: 1
</span><span class='line'>gpg: signatures created so far: 2
</span><span class='line'>gpg: existing key will be replaced
</span><span class='line'>gpg: please wait while key is being generated ...
</span><span class='line'>gpg: key generation completed (9 seconds)
</span><span class='line'>gpg: signatures created so far: 3
</span><span class='line'>gpg: signatures created so far: 4
</span><span class='line'>gpg: key C15CE3D7 marked as ultimately trusted
</span><span class='line'>public and secret key created and signed.
</span><span class='line'>
</span><span class='line'>gpg: checking the trustdb
</span><span class='line'>gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
</span><span class='line'>gpg: depth: 0  valid:   2  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 2u
</span><span class='line'>pub   2048R/C15CE3D7 2015-06-15
</span><span class='line'>      Key fingerprint = B702 663D 833B DC19 0EEF  663A 54FA 0B1E C15C E3D7
</span><span class='line'>uid                  staf wagemakers &lt;staf@wagemakers.be&gt;
</span><span class='line'>sub   2048R/D2AEBBA3 2015-06-15
</span><span class='line'>sub   2048R/6C2C699A 2015-06-15
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>gpg/card&gt; 
</span></code></pre></td></tr></table></div></figure>


<h3>Extract the public key</h3>

<h4>Execute gpg &ndash;card-status</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>staf@vicky ~]$ gpg --card-status
</span><span class='line'>Application ID ...: D2760001240102000006035062250000
</span><span class='line'>Version ..........: 2.0
</span><span class='line'>Manufacturer .....: unknown
</span><span class='line'>Serial number ....: 03506225
</span><span class='line'>Name of cardholder: [not set]
</span><span class='line'>Language prefs ...: [not set]
</span><span class='line'>Sex ..............: unspecified
</span><span class='line'>URL of public key : [not set]
</span><span class='line'>Login data .......: [not set]
</span><span class='line'>Signature PIN ....: not forced
</span><span class='line'>Key attributes ...: 2048R 2048R 2048R
</span><span class='line'>Max. PIN lengths .: 127 127 127
</span><span class='line'>PIN retry counter : 3 3 3
</span><span class='line'>Signature counter : 5
</span><span class='line'>Signature key ....: AED7 C79B 574D 45CC 7C1B  CC35 BDDE E66F 0C2C CF82
</span><span class='line'>      created ....: 2015-06-16 06:32:02
</span><span class='line'>Encryption key....: 6650 AB0A 5F31 059F 3221  3F29 C9F3 2031 01B3 1F53
</span><span class='line'>      created ....: 2015-06-16 06:32:02
</span><span class='line'>Authentication key: A387 A45A 446E DC9C D78E  F173 7C19 5D7D A1D9 9813
</span><span class='line'>      created ....: 2015-06-16 06:32:02
</span><span class='line'>General key info..: pub  2048R/0C2CCF82 2015-06-16 staf wagemakers &lt;staf@wagemakers.be&gt;
</span><span class='line'>sec&gt;  2048R/0C2CCF82  created: 2015-06-16  expires: never     
</span><span class='line'>                      card-no: 0006 03506225
</span><span class='line'>ssb&gt;  2048R/A1D99813  created: 2015-06-16  expires: never     
</span><span class='line'>                      card-no: 0006 03506225
</span><span class='line'>ssb&gt;  2048R/01B31F53  created: 2015-06-16  expires: never     
</span><span class='line'>                      card-no: 0006 03506225
</span><span class='line'>[staf@vicky ~]$ </span></code></pre></td></tr></table></div></figure>


<h4>Run gpgkey2ssh on the authentication key</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ gpgkey2ssh A1D99813
</span><span class='line'>ssh-rsa qwertyqwertyqwerty COMMENT
</span><span class='line'>[staf@vicky ~]$ </span></code></pre></td></tr></table></div></figure>


<h3>Test ssh access</h3>

<h4>Configure the gpg agent</h4>

<p>The gpg-agent can be use as a ssh-agent</p>

<h5>Enable ssh support in your gpg-agent.conf</h5>

<p>Create your gpg-agent.conf file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ vi .gnupg/gpg-agent.conf</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pinentry-program  /usr/bin/pinentry
</span><span class='line'>enable-ssh-support</span></code></pre></td></tr></table></div></figure>


<h4>Start the gpg-agent</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>staf@vicky ~]$ gpg-agent --daemon --verbose
</span><span class='line'>gpg-agent[1395]: listening on socket '/home/staf/.gnupg/S.gpg-agent'
</span><span class='line'>gpg-agent[1395]: listening on socket '/home/staf/.gnupg/S.gpg-agent.ssh'
</span><span class='line'>gpg-agent[1396]: gpg-agent (GnuPG) 2.1.4 started
</span><span class='line'>SSH_AUTH_SOCK=/home/staf/.gnupg/S.gpg-agent.ssh; export SSH_AUTH_SOCK;
</span><span class='line'>[staf@vicky ~]$ </span></code></pre></td></tr></table></div></figure>


<h4>Export the SSH_AUTH_SOCK variable</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SSH_AUTH_SOCK=/home/staf/.gnupg/S.gpg-agent.ssh; export SSH_AUTH_SOCK;
</span></code></pre></td></tr></table></div></figure>


<h4>Verify the agent</h4>

<p>Run ssh-add -L</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[staf@vicky ~]$ ssh-add -L
</span><span class='line'>error fetching identities for protocol 1: agent refused operation
</span><span class='line'>ssh-rsa qwertyqwertyqwerty cardno:xxxx</span></code></pre></td></tr></table></div></figure>


<p>The public key must be the same as extracted with &ldquo;gpgkey2ssh&rdquo;</p>

<h4>Add the public key to the remote system</h4>

<p>Add this public key to ~/.ssh/authorized_keys on the remote system.</p>

<h4>Test</h4>

<p>Try to logon to your remote system</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>staf@vicky ~]$ ssh -v xxx.xxx.xxx.xxx</span></code></pre></td></tr></table></div></figure>


<p>You should get a window that asks for user PIN code.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>               ┌──────────────────────────────────────────────┐
</span><span class='line'>               │ Please enter the PIN                         │
</span><span class='line'>               │                                              │
</span><span class='line'>               │ PIN ________________________________________ │
</span><span class='line'>               │                                              │
</span><span class='line'>               │      &lt;OK&gt;                        &lt;Cancel&gt;    │
</span><span class='line'>               └──────────────────────────────────────────────┘
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>FreeBSD 10.1-RELEASE-p10 (GENERIC) #0: Wed May 13 06:54:13 UTC 2015
</span><span class='line'>
</span><span class='line'>Welcome to FreeBSD!
</span><span class='line'>
</span><span class='line'>Release Notes, Errata: https://www.FreeBSD.org/releases/
</span><span class='line'>Security Advisories:   https://www.FreeBSD.org/security/
</span><span class='line'>FreeBSD Handbook:      https://www.FreeBSD.org/handbook/
</span><span class='line'>FreeBSD FAQ:           https://www.FreeBSD.org/faq/
</span><span class='line'>Questions List: https://lists.FreeBSD.org/mailman/listinfo/freebsd-questions/
</span><span class='line'>FreeBSD Forums:        https://forums.FreeBSD.org/
</span><span class='line'>
</span><span class='line'>Documents installed with the system are in the /usr/local/share/doc/freebsd/
</span><span class='line'>directory, or can be installed later with:  pkg install en-freebsd-doc
</span><span class='line'>For other languages, replace "en" with a language code like de or fr.
</span><span class='line'>
</span><span class='line'>Show the version of FreeBSD installed:  freebsd-version ; uname -a
</span><span class='line'>Please include that output and any error messages when posting questions.
</span><span class='line'>Introduction to manual pages:  man man
</span><span class='line'>FreeBSD directory layout:      man hier
</span><span class='line'>
</span><span class='line'>Edit /etc/motd to change this login announcement.
</span><span class='line'>Want to run the same command again?
</span><span class='line'>In tcsh you can type "!!"
</span><span class='line'>$ 
</span></code></pre></td></tr></table></div></figure>


<h2>CleanUp</h2>

<h3>Start the gpg-daemon</h3>

<p>Add</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gpg-agent --daemon
</span><span class='line'>SSH_AUTH_SOCK=/home/staf/.gnupg/S.gpg-agent.ssh; export SSH_AUTH_SOCK;</span></code></pre></td></tr></table></div></figure>


<p>To your .bash_profile or setup a generic script for all users in /etc/profile.d/</p>

<h3>Disable password login in the /etc/ssh/sshd_config</h3>

<p><em>Have fun!</em></p>

<h2>Links</h2>

<ul>
<li><a href="https://www.yubico.com/2012/12/yubikey-neo-openpgp/"><a href="https://www.yubico.com/2012/12/yubikey-neo-openpgp/">https://www.yubico.com/2012/12/yubikey-neo-openpgp/</a></a></li>
<li><a href="https://blog.habets.se/2013/02/GPG-and-SSH-with-Yubikey-NEO"><a href="https://blog.habets.se/2013/02/GPG-and-SSH-with-Yubikey-NEO">https://blog.habets.se/2013/02/GPG-and-SSH-with-Yubikey-NEO</a></a></li>
<li><a href="http://25thandclement.com/~william/YubiKey_NEO.html"><a href="http://25thandclement.com/~william/YubiKey_NEO.html">http://25thandclement.com/~william/YubiKey_NEO.html</a></a></li>
<li><a href="http://forum.yubico.com/viewtopic.php?f=26&t=1171"><a href="http://forum.yubico.com/viewtopic.php?f=26&amp;t=1171">http://forum.yubico.com/viewtopic.php?f=26&amp;t=1171</a></a></li>
<li><a href="https://developers.yubico.com/yubikey-personalization/Releases/"><a href="https://developers.yubico.com/yubikey-personalization/Releases/">https://developers.yubico.com/yubikey-personalization/Releases/</a></a></li>
<li><a href="http://www.incenp.org/notes/2014/gnupg-for-ssh-authentication.html"><a href="http://www.incenp.org/notes/2014/gnupg-for-ssh-authentication.html">http://www.incenp.org/notes/2014/gnupg-for-ssh-authentication.html</a></a></li>
<li><a href="http://www.programmierecke.net/howto/gpg-ssh.html"><a href="http://www.programmierecke.net/howto/gpg-ssh.html">http://www.programmierecke.net/howto/gpg-ssh.html</a></a></li>
<li><a href="http://www.bradfordembedded.com/2013/12/yubikey-smartcard/"><a href="http://www.bradfordembedded.com/2013/12/yubikey-smartcard/">http://www.bradfordembedded.com/2013/12/yubikey-smartcard/</a></a></li>
<li><a href="http://www.incenp.org/notes/2014/gnupg-for-ssh-authentication.html"><a href="http://www.incenp.org/notes/2014/gnupg-for-ssh-authentication.html">http://www.incenp.org/notes/2014/gnupg-for-ssh-authentication.html</a></a></li>
<li><a href="https://github.com/herlo/ssh-gpg-smartcard-config/blob/master/YubiKey_NEO.rst"><a href="https://github.com/herlo/ssh-gpg-smartcard-config/blob/master/YubiKey_NEO.rst">https://github.com/herlo/ssh-gpg-smartcard-config/blob/master/YubiKey_NEO.rst</a></a></li>
<li><a href="https://www.esev.com/blog/post/2015-01-pgp-ssh-key-on-yubikey-neo/"><a href="https://www.esev.com/blog/post/2015-01-pgp-ssh-key-on-yubikey-neo/">https://www.esev.com/blog/post/2015-01-pgp-ssh-key-on-yubikey-neo/</a></a></li>
<li><a href="https://wiki.archlinux.org/index.php/Common_Access_Card"><a href="https://wiki.archlinux.org/index.php/Common_Access_Card">https://wiki.archlinux.org/index.php/Common_Access_Card</a></a></li>
<li><a href="https://wiki.archlinux.org/index.php/Udev"><a href="https://wiki.archlinux.org/index.php/Udev">https://wiki.archlinux.org/index.php/Udev</a></a></li>
<li><a href="https://securityblog.redhat.com/2014/07/30/controlling-access-to-smart-cards/"><a href="https://securityblog.redhat.com/2014/07/30/controlling-access-to-smart-cards/">https://securityblog.redhat.com/2014/07/30/controlling-access-to-smart-cards/</a></a></li>
</ul>

</div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- blog_actrikel -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4659298941528586"
     data-ad-slot="7394058542"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">staf wagemakers</span></span>

      




<time class='entry-date' datetime='2015-06-16T10:32:00+02:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:32 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/blog/categories/fedora/'>fedora</a>, <a class='category' href='/blog/blog/categories/gpg/'>gpg</a>, <a class='category' href='/blog/blog/categories/security/'>security</a>, <a class='category' href='/blog/blog/categories/smartcard/'>smartcard</a>, <a class='category' href='/blog/blog/categories/ssh/'>ssh</a>, <a class='category' href='/blog/blog/categories/yubikey/'>yubikey</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://stafwag.github.io/blog/blog/2015/06/16/using-yubikey-neo-as-gpg-smartcard-for-ssh-authentication/" data-via="" data-counturl="http://stafwag.github.io/blog/blog/2015/06/16/using-yubikey-neo-as-gpg-smartcard-for-ssh-authentication/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
  <span style="overflow: hidden; text-overflow: ellipsis;white-space: nowrap;">
    <script src="//platform.linkedin.com/in.js" type="text/javascript">
    lang: en_US
  </script>
  <script type="IN/Share" data-url="http://stafwag.github.io/blog/blog/2015/06/16/using-yubikey-neo-as-gpg-smartcard-for-ssh-authentication/" data-counter="right"></script>
  </snap>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/blog/2015/05/14/openvas-7-adding-credentials-failed/" title="Previous Post: Openvas 7: adding credentials failed">&laquo; Openvas 7: adding credentials failed</a>
      
      
        <a class="basic-alignment right" href="/blog/blog/2015/06/23/using-squid-to-cache-freebsd-packages/" title="Next Post: Using squid to cache FreeBSD packages">Using squid to cache FreeBSD packages &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p><a href="http://www.wagemakers.be">http://www.wagemakers.be</a></p>
  <p><a href="http://www.linkedin.com/in/stafwagemakers">LinkedIn profile</a></p>
  <p><a href="https://google.com/+StafWagemakers">Google Plus profile</a></p>
<!-- Place this tag where you want the widget to render. -->
<div class="g-person" data-width="180" data-href="http://google.com/+StafWagemakers" data-showtagline="false" data-showcoverphoto="false" data-rel="author"></div>

<!-- Place this tag after the last widget tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2017/09/16/20-core-dual-processor-jenkins-build-workstation/">20 Core Dual Processor Jenkins Build Workstation</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2017/09/09/bacula-on-freebsd-part2/">Bacula on FreeBSD (Part 2 Bacula Catalog Over SSL )</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2017/08/06/bacula-on-freebsd:w_part1/">Bacula on FreeBSD (Part 1 PostgresSQL in a Jail)</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2017/05/25/install-parabola-gnu-slash-linux-on-an-encrypted-btrfs-logical-volume/">Install Parabola GNU/Linux on an Encrypted Btrfs Logical Volume</a>
      </li>
    
      <li class="post">
        <a href="/blog/blog/2017/02/11/how-to-install-libreboot-on-a-thinkpad-x60/">How to Install Libreboot on a ThinkPad X60</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/stafwag">@stafwag</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'stafwag',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>





<hr />
<br />
<br />
<br />
<br />
<script type="text/javascript"><!--
google_ad_client = "ca-pub-4659298941528586";
/* blogads_right */
google_ad_slot = "8839948148";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - staf wagemakers -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'stafwag';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://stafwag.github.io/blog/blog/2015/06/16/using-yubikey-neo-as-gpg-smartcard-for-ssh-authentication/';
        var disqus_url = 'http://stafwag.github.io/blog/blog/2015/06/16/using-yubikey-neo-as-gpg-smartcard-for-ssh-authentication/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

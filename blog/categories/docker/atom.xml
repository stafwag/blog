<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Docker | stafwag Blog]]></title>
  <link href="https://stafwag.github.io/blog/blog/categories/docker/atom.xml" rel="self"/>
  <link href="https://stafwag.github.io/blog/"/>
  <updated>2019-01-06T09:52:26+01:00</updated>
  <id>https://stafwag.github.io/blog/</id>
  <author>
    <name><![CDATA[staf wagemakers]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Jenkins Build With 20 Cores]]></title>
    <link href="https://stafwag.github.io/blog/blog/2017/09/30/jenkins-build-with-20-cores/"/>
    <updated>2017-09-30T19:18:14+02:00</updated>
    <id>https://stafwag.github.io/blog/blog/2017/09/30/jenkins-build-with-20-cores</id>
    <content type="html"><![CDATA[<p>I finally got the time to try out my jenkins build on my new <a href="http://stafwag.github.io/blog/blog/2017/09/16/20-core-dual-processor-jenkins-build-workstation/">20 Core Dual Processor Jenkins Build Workstation</a></p>

<p><div class="embed-video-container"><iframe src="http://www.youtube.com/embed/BNn9absXkE8 "></iframe></div></p>

<p>I&rsquo;m able to run all test on multiple operation systems now. I still need to review this setup and perhaps move some tests to <a href="https://www.docker.io">docker</a> instead of the virtual machines to save some memory. &hellip;but this jenkins setup was configured before docker was a thing.</p>

<p><strong><em>Have fun</em></strong></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Running Docker on ARM]]></title>
    <link href="https://stafwag.github.io/blog/blog/2015/12/26/running-docker-on-arm/"/>
    <updated>2015-12-26T14:55:59+01:00</updated>
    <id>https://stafwag.github.io/blog/blog/2015/12/26/running-docker-on-arm</id>
    <content type="html"><![CDATA[<p><img class="right" src="/images/odroid_2_euro.jpg" width="500" height="256" title="&ldquo;odroid u3 2 euro&rdquo;" ></p>

<p>I own an <a href="http://www.hardkernel.com/main/products/prdt_info.php?g_code=g138745696275">odroid u3</a> that I used for my media center with <a href="https://xbmc.org/">xbmc</a> while I like the performance of the <a href="https://en.wikipedia.org/wiki/Exynos">Exynos4412 CPU</a> but the drivers for the <a href="https://en.wikipedia.org/wiki/Mali_%28GPU%29">Mali GPU</a> aren&rsquo;t <a href="https://en.wikipedia.org/wiki/Open_source">opensource</a>.</p>

<p>I like <a href="https://en.wikipedia.org/wiki/ARM_architecture">ARM</a> but unfortunatelly a lot of the ARM <a href="https://en.wikipedia.org/wiki/System_on_a_chip">soc</a>&rsquo;s  have no opensource drivers for the <a href="https://en.wikipedia.org/wiki/Graphics_processing_unit">GPU</a></p>

<p>The manufacturer of the odroid u3 - <a href="http://www.hardkernel.com/">hardkernel</a> - provides <a href="http://com.odroid.com/sigong/nf_file_board/nfile_board.php?tag=ODROID-U3">ubuntu 14.04 images</a> with xbmc and mali support. It isn&rsquo;t possible to get the newer of version of xbmc - now <a href="http://www.kodi.org">kodi</a> - running, or I didn&rsquo;t succeed withit. I&rsquo;ll look for another solution for my media server needs this might be my <a href="https://www.raspberrypi.org/">raspberry pi</a> <a href="https://www.raspberrypi.org/products/model-b-plus/">1 model B+</a> that is laying around doing nothing running <a href="http://openelec.tv/">openelec</a><br /><br />
<img class="left" src="/images/odroid_u3_with_usbdisk.jpg" width="500" height="352" title="&ldquo;odroid u3 with usb disk&rdquo;" ></p>

<p>Like I said I like the performance of the ordoid U3 that why I installed <a href="http://archlinuxarm.org/">archLinuxArm</a> to play with <a href="https://www.docker.com/">Docker</a>. I could have sticked with Ubuntu 14.04 but with Arch Linux I get more up-to-date software.</p>

<p><a href="http://archlinuxarm.org/platforms/armv7/samsung/odroid-u3">The installion</a> was pretty straightforward even the <a href="https://wiki.archlinux.org/index.php/Docker">docker installation</a> was the same as on a <a href="https://en.wikipedia.org/wiki/X86">x86 platform</a>.<br /></p>

<p>Since we are using docker on arm we have to build our own docker base images instead of using the <a href="https://hub.docker.com/_/registry/">docker registery</a>. I have security concerns about installtion and using unsigned non-verified software anyway. If you build your own image it possible to audit/verify the build process.</p>

<h2>Creating your own docker base images</h2>

<h3>Arch</h3>

<p>To build a Arch Base Image download mkimage-arch.sh and mkimage-arch-pacman.conf from the Docker source <a href="https://github.com/docker/docker/blob/master/contrib/"><a href="https://github.com/docker/docker/blob/master/contrib/">https://github.com/docker/docker/blob/master/contrib/</a></a></p>

<h4>Download mkimage-arch.sh</h4>

<pre><code>staf@fanny arch]$ wget https://raw.githubusercontent.com/docker/docker/master/contrib/mkimage-arch.sh
--2015-12-26 10:21:10--  https://raw.githubusercontent.com/docker/docker/master/contrib/mkimage-arch.sh
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 23.235.43.133
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|23.235.43.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2351 (2.3K) [text/plain]
Saving to: 'mkimage-arch.sh'

mkimage-arch.sh                     100%[=====================================================================&gt;]   2.30K  --.-KB/s   in 0s     

2015-12-26 10:21:10 (144 MB/s) - 'mkimage-arch.sh' saved [2351/2351]

[staf@fanny arch]$ chmod +x mkimage-arch.sh 
[staf@fanny arch]$ 
</code></pre>

<h4>Increase the timeout</h4>

<pre><code>[staf@fanny arch]$ sed -i 's/timeout 60/timeout 120/' mkimage-arch.sh
[staf@fanny arch]$ 
</code></pre>

<h4>Copy pacman.conf</h4>

<pre><code>[staf@fanny arch]$ cp /etc/pacman.conf mkimage-arch-pacman.conf
[staf@fanny arch]$ 
</code></pre>

<h4>Install the arch keyring</h4>

<pre><code>[staf@fanny debian]$ sudo pacman -Ss keyring                                                                                                                                                                                                                                                                                                                                                                                             
core/archlinux-keyring 20151206-1                                                                                                                                                                                                                                                                                                                                                                                                        
    Arch Linux PGP keyring                                                                                                                                                                                                                                                                                                                                                                                                               
core/archlinuxarm-keyring 20140119-1                                                                                                                                                                                                                                                                                                                                                                                                     
    Arch Linux ARM PGP keyring                                                                                                                                                                                                                                                                                                                                                                                                           
extra/gnome-keyring 1:3.18.3-1 (gnome)                                                                                                                                                                                                                                                                                                                                                                                                   
    GNOME Password Management daemon                                                                                                                                                                                                                                                                                                                                                                                                     
extra/gnome-keyring-sharp 1.0.2-5                                                                                                                                                                                                                                                                                                                                                                                                        
    A fully managed implementation of libgnome-keyring                                                                                                                                                                                                                                                                                                                                                                                   
extra/libgnome-keyring 3.12.0-2                                                                                                                                                                                                                                                                                                                                                                                                          
    GNOME keyring client library                                                                                                                                                                                                                                                                                                                                                                                                         
extra/python2-gnomekeyring 2.32.0-15                                                                                                                                                                                                                                                                                                                                                                                                     
    Python bindings for libgnome-keyring                                                                                                                                                                                                                                                                                                                                                                                                 
community/python-keyring 5.7.1-1                                                                                                                                                                                                                                                                                                                                                                                                         
    Store and access your passwords safely.                                                                                                                                                                                                                                                                                                                                                                                              
community/python2-keyring 5.7.1-1                                                                                                                                                                                                                                                                                                                                                                                                        
    Store and access your passwords safely.                                                                                                                                                                                                                                                                                                                                                                                              
[staf@fanny debian]$ sudo pacman -S archlinuxarm-keyring                                                                                                                                                                                                                                                                                                                                                                                 
resolving dependencies...                                                                                                                                                                                                                                                                                                                                                                                                                
looking for conflicting packages...                                                                                                                                                                                                                                                                                                                                                                                                      

Packages (1) archlinuxarm-keyring-20140119-1                                                                                                                                                                                                                                                                                                                                                                                             

Total Download Size:   0.01 MiB                                                                                                                                                                                                                                                                                                                                                                                                          
Total Installed Size:  0.03 MiB                                                                                                                                                                                                                                                                                                                                                                                                          

:: Proceed with installation? [Y/n] y                                                                                                                                                                                                                                                                                                                                                                                                    
:: Retrieving packages ...                                                                                                                                                                                                                                                                                                                                                                                                               
 archlinuxarm-keyring-20140119-1-any                                                                                                                                                                                                    12.2 KiB  1218K/s 00:00 [##################################################################################################################################################################] 100%
(1/1) checking keys in keyring                                                                                                                                                                                                                                  [##################################################################################################################################################################] 100%
(1/1) checking package integrity                                                                                                                                                                                                                                [##################################################################################################################################################################] 100%
(1/1) loading package files                                                                                                                                                                                                                                     [##################################################################################################################################################################] 100%
(1/1) checking for file conflicts                                                                                                                                                                                                                               [##################################################################################################################################################################] 100%
(1/1) checking available disk space                                                                                                                                                                                                                             [##################################################################################################################################################################] 100%
(1/1) installing archlinuxarm-keyring                                                                                                                                                                                                                           [##################################################################################################################################################################] 100%
[staf@fanny debian]$ sudo pacman -S archlinux-keyring                                                                                                                                                                                                                                                                                                                                                                                    
resolving dependencies...                                                                                                                                                                                                                                                                                                                                                                                                                
looking for conflicting packages...                                                                                                                                                                                                                                                                                                                                                                                                      

Packages (1) archlinux-keyring-20151206-1                                                                                                                                                                                                                                                                                                                                                                                                

Total Download Size:   0.49 MiB                                                                                                                                                                                                                                                                                                                                                                                                          
Total Installed Size:  0.70 MiB                                                                                                                                                                                                                                                                                                                                                                                                          

:: Proceed with installation? [Y/n] y                                                                                                                                                                                                                                                                                                                                                                                                    
:: Retrieving packages ...                                                                                                                                                                                                                                                                                                                                                                                                               
 archlinux-keyring-20151206-1-any                                                                                                                                                                                                      505.5 KiB   231K/s 00:02 [##################################################################################################################################################################] 100%
(1/1) checking keys in keyring                                                                                                                                                                                                                                  [##################################################################################################################################################################] 100%
(1/1) checking package integrity                                                                                                                                                                                                                                [##################################################################################################################################################################] 100%
(1/1) loading package files                                                                                                                                                                                                                                     [##################################################################################################################################################################] 100%
(1/1) checking for file conflicts                                                                                                                                                                                                                               [##################################################################################################################################################################] 100%
(1/1) checking available disk space                                                                                                                                                                                                                             [##################################################################################################################################################################] 100%
(1/1) installing archlinux-keyring                                                                                                                                                                                                                              [##################################################################################################################################################################] 100%
[staf@fanny debian]$                                                                                                                                                                                                                                                                                                                                                                                                                     
</code></pre>

<h4>Create the base Arch Image</h4>

<pre><code>[staf@fanny arch]$ sudo LC_ALL=C TMPDIR=`pwd`/tmp ./mkimage-arch.sh
spawn pacstrap -C ./mkimage-arch-pacman.conf -c -d -G -i /home/staf/docker/docker/base-images/arch/tmp/rootfs-archlinux-eYGavMPZLd base haveged --ignore cryptsetup,device-mapper,dhcpcd,iproute2,jfsutils,linux,lvm2,man-db,man-pages,mdadm,nano,netctl,openresolv,pciutils,pcmciautils,reiserfsprogs,s-nail,systemd-sysvcompat,usbutils,vi,xfsprogs
==&gt; Creating install root at /home/staf/docker/docker/base-images/arch/tmp/rootfs-archlinux-eYGavMPZLd
==&gt; Installing packages to /home/staf/docker/docker/base-images/arch/tmp/rootfs-archlinux-eYGavMPZLd
:: Synchronizing package databases...
 core                                                         210.4 KiB   288K/s 00:01 [##################################################] 100%
 extra                                                          2.3 MiB   409K/s 00:06 [##################################################] 100%
 community                                                      3.2 MiB   314K/s 00:10 [##################################################] 100%
 alarm                                                        105.4 KiB  77.8K/s 00:01 [##################################################] 100%
 aur                                                           31.2 KiB   164K/s 00:00 [##################################################] 100%
:: cryptsetup is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: device-mapper is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: dhcpcd is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: iproute2 is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: jfsutils is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: lvm2 is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: man-db is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: man-pages is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: mdadm is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: nano is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: netctl is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: pciutils is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: reiserfsprogs is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: s-nail is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: systemd-sysvcompat is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: usbutils is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: vi is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: xfsprogs is in IgnorePkg/IgnoreGroup. Install anyway? [Y/n] n
:: There are 31 members in group base:
:: Repository core
   1) bash  2) bzip2  3) coreutils  4) diffutils  5) e2fsprogs  6) file  7) filesystem  8) findutils  9) gawk  10) gcc-libs  11) gettext
   12) glibc  13) grep  14) gzip  15) inetutils  16) iputils  17) less  18) licenses  19) logrotate  20) pacman  21) pacman-mirrorlist
   22) perl  23) procps-ng  24) psmisc  25) sed  26) shadow  27) sysfsutils  28) tar  29) texinfo  30) util-linux  31) which

Enter a selection (default=all): 
resolving dependencies...
looking for conflicting packages...

Packages (86) acl-2.2.52-2  attr-2.4.47-1  ca-certificates-20150402-1  ca-certificates-cacert-20140824-2  ca-certificates-mozilla-3.20.1-1
              ca-certificates-utils-20150402-1  cracklib-2.9.4-1  curl-7.46.0-1  db-5.3.28-3  expat-2.1.0-4  gdbm-1.11-1  glib2-2.46.2-2
              gmp-6.1.0-2  gnupg-2.1.10-3  gnutls-3.4.7-2  gpgme-1.6.0-2  iana-etc-20151016-1  keyutils-1.5.9-1  krb5-1.13.2-1
              libarchive-3.1.2-8  libassuan-2.4.2-1  libcap-2.24-2  libffi-3.2.1-1  libgcrypt-1.6.4-1  libgpg-error-1.21-1  libidn-1.32-1
              libksba-1.3.3-1  libldap-2.4.42-2  libsasl-2.1.26-7  libssh2-1.6.0-1  libsystemd-228-3  libtasn1-4.7-1  libtirpc-1.0.1-2
              libunistring-0.9.6-1  libutil-linux-2.27.1-1  linux-api-headers-4.1.4-1  lz4-131-1  lzo-2.09-1  mpfr-3.1.3.p4-1  ncurses-6.0-4
              nettle-3.1.1-1  npth-1.2-1  openssl-1.0.2.e-1  p11-kit-0.23.1-3  pam-1.2.1-3  pambase-20130928-1  pcre-8.38-2  pinentry-0.9.7-1
              popt-1.16-7  readline-6.3.008-3  sqlite-3.9.2-1  tzdata-2015g-1  xz-5.2.2-1  zlib-1.2.8-4  bash-4.3.042-4  bzip2-1.0.6-5
              coreutils-8.24-1  diffutils-3.3-2  e2fsprogs-1.42.13-1  file-5.25-1  filesystem-2015.09-1  findutils-4.4.2-6  gawk-4.1.3-1
              gcc-libs-5.3.0-3  gettext-0.19.6-2  glibc-2.22-3  grep-2.22-1  gzip-1.6-1  haveged-1.9.1-2  inetutils-1.9.4-2.1
              iputils-20140519.fad11dc-1  less-481-2  licenses-20140629-1  logrotate-3.9.1-1  pacman-4.2.1-4  pacman-mirrorlist-20151217-1
              perl-5.22.1-1  procps-ng-3.3.11-2  psmisc-22.21-3  sed-4.2.2-3  shadow-4.2.1-3  sysfsutils-2.1.0-9  tar-1.28-1  texinfo-6.0-1
              util-linux-2.27.1-1  which-2.21-1

Total Installed Size:  272.82 MiB

:: Proceed with installation? [Y/n] y
(86/86) checking keys in keyring                                                       [##################################################] 100%
(86/86) checking package integrity                                                     [##################################################] 100%
(86/86) loading package files                                                          [##################################################] 100%
(86/86) checking for file conflicts                                                    [##################################################] 100%
(86/86) checking available disk space                                                  [##################################################] 100%
( 1/86) installing linux-api-headers                                                   [##################################################] 100%
( 2/86) installing tzdata                                                              [##################################################] 100%
( 3/86) installing iana-etc                                                            [##################################################] 100%
( 4/86) installing filesystem                                                          [##################################################] 100%
( 5/86) installing glibc                                                               [##################################################] 100%
( 6/86) installing gcc-libs                                                            [##################################################] 100%
( 7/86) installing ncurses                                                             [##################################################] 100%
( 8/86) installing readline                                                            [##################################################] 100%
( 9/86) installing bash                                                                [##################################################] 100%
Optional dependencies for bash
    bash-completion: for tab completion
(10/86) installing bzip2                                                               [##################################################] 100%
(11/86) installing attr                                                                [##################################################] 100%
(12/86) installing acl                                                                 [##################################################] 100%
(13/86) installing gmp                                                                 [##################################################] 100%
(14/86) installing libcap                                                              [##################################################] 100%
(15/86) installing zlib                                                                [##################################################] 100%
(16/86) installing gdbm                                                                [##################################################] 100%
(17/86) installing db                                                                  [##################################################] 100%
(18/86) installing perl                                                                [##################################################] 100%
(19/86) installing openssl                                                             [##################################################] 100%
Optional dependencies for openssl
    ca-certificates [pending]
(20/86) installing coreutils                                                           [##################################################] 100%
(21/86) installing diffutils                                                           [##################################################] 100%
(22/86) installing libutil-linux                                                       [##################################################] 100%
(23/86) installing e2fsprogs                                                           [##################################################] 100%
(24/86) installing file                                                                [##################################################] 100%
(25/86) installing findutils                                                           [##################################################] 100%
(26/86) installing mpfr                                                                [##################################################] 100%
(27/86) installing gawk                                                                [##################################################] 100%
(28/86) installing pcre                                                                [##################################################] 100%
(29/86) installing libffi                                                              [##################################################] 100%
(30/86) installing glib2                                                               [##################################################] 100%
Optional dependencies for glib2
    python2: for gdbus-codegen and gtester-report
    libelf: gresource inspection tool
(31/86) installing libunistring                                                        [##################################################] 100%
(32/86) installing gettext                                                             [##################################################] 100%
Optional dependencies for gettext
    git: for autopoint infrastructure updates
(33/86) installing grep                                                                [##################################################] 100%
(34/86) installing less                                                                [##################################################] 100%
(35/86) installing gzip                                                                [##################################################] 100%
(36/86) installing cracklib                                                            [##################################################] 100%
(37/86) installing libsasl                                                             [##################################################] 100%
(38/86) installing libldap                                                             [##################################################] 100%
(39/86) installing keyutils                                                            [##################################################] 100%
(40/86) installing krb5                                                                [##################################################] 100%
(41/86) installing libtirpc                                                            [##################################################] 100%
(42/86) installing pambase                                                             [##################################################] 100%
(43/86) installing pam                                                                 [##################################################] 100%
(44/86) installing inetutils                                                           [##################################################] 100%
(45/86) installing sysfsutils                                                          [##################################################] 100%
(46/86) installing iputils                                                             [##################################################] 100%
Optional dependencies for iputils
    xinetd: for tftpd
(47/86) installing licenses                                                            [##################################################] 100%
(48/86) installing popt                                                                [##################################################] 100%
(49/86) installing logrotate                                                           [##################################################] 100%
(50/86) installing expat                                                               [##################################################] 100%
(51/86) installing lzo                                                                 [##################################################] 100%
(52/86) installing xz                                                                  [##################################################] 100%
(53/86) installing libarchive                                                          [##################################################] 100%
(54/86) installing texinfo                                                             [##################################################] 100%
(55/86) installing libtasn1                                                            [##################################################] 100%
(56/86) installing p11-kit                                                             [##################################################] 100%
(57/86) installing ca-certificates-utils                                               [##################################################] 100%
(58/86) installing ca-certificates-mozilla                                             [##################################################] 100%
(59/86) installing ca-certificates-cacert                                              [##################################################] 100%
(60/86) installing ca-certificates                                                     [##################################################] 100%
(61/86) installing libidn                                                              [##################################################] 100%
(62/86) installing libssh2                                                             [##################################################] 100%
(63/86) installing curl                                                                [##################################################] 100%
(64/86) installing libgpg-error                                                        [##################################################] 100%
(65/86) installing npth                                                                [##################################################] 100%
(66/86) installing libgcrypt                                                           [##################################################] 100%
(67/86) installing libksba                                                             [##################################################] 100%
(68/86) installing libassuan                                                           [##################################################] 100%
(69/86) installing pinentry                                                            [##################################################] 100%
Optional dependencies for pinentry
    gtk2: gtk2 backend
    qt5-base: qt backend
    gcr: gnome3 backend
(70/86) installing nettle                                                              [##################################################] 100%
(71/86) installing gnutls                                                              [##################################################] 100%
Optional dependencies for gnutls
    guile: for use with Guile bindings
(72/86) installing sqlite                                                              [##################################################] 100%
(73/86) installing gnupg                                                               [##################################################] 100%
Optional dependencies for gnupg
    libldap: gpg2keys_ldap [installed]
    libusb-compat: scdaemon
(74/86) installing gpgme                                                               [##################################################] 100%
(75/86) installing pacman-mirrorlist                                                   [##################################################] 100%
(76/86) installing pacman                                                              [##################################################] 100%
Optional dependencies for pacman
    fakeroot: for makepkg usage as normal user
(77/86) installing lz4                                                                 [##################################################] 100%
(78/86) installing libsystemd                                                          [##################################################] 100%
(79/86) installing procps-ng                                                           [##################################################] 100%
(80/86) installing psmisc                                                              [##################################################] 100%
(81/86) installing sed                                                                 [##################################################] 100%
(82/86) installing shadow                                                              [##################################################] 100%
(83/86) installing tar                                                                 [##################################################] 100%
(84/86) installing util-linux                                                          [##################################################] 100%
Optional dependencies for util-linux
    python: python bindings to libmount
(85/86) installing which                                                               [##################################################] 100%
(86/86) installing haveged                                                             [##################################################] 100%
gpg: /etc/pacman.d/gnupg/trustdb.gpg: trustdb created
gpg: no ultimately trusted keys found
gpg: starting migration from earlier GnuPG versions
gpg: porting secret keys from '/etc/pacman.d/gnupg/secring.gpg' to gpg-agent
gpg: migration succeeded
gpg: Generating pacman keyring master key...
gpg: key 4C4DCB68 marked as ultimately trusted
gpg: directory '/etc/pacman.d/gnupg/openpgp-revocs.d' created
gpg: Done
==&gt; Updating trust database...
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
checking dependencies...

Packages (1) haveged-1.9.1-2

Total Removed Size:  0.18 MiB

:: Do you want to remove these packages? [Y/n] 
(1/1) removing haveged                                                                 [##################################################] 100%
==&gt; ERROR: The keyring file /usr/share/pacman/keyrings/archlinux.gpg does not exist.
Generating locales...
  en_US.UTF-8... done
Generation complete.
tar: ./etc/pacman.d/gnupg/S.gpg-agent: socket ignored
5de54cc959c36d2064ee4389c0cc50acdb2246b3eac4edeb5e83cac7f4d9b350
Success.
[staf@fanny arch]$
</code></pre>

<h4>Try it</h4>

<pre><code>[staf@fanny arch]$ docker run -t -i --rm archlinux /bin/bash
[root@6c24a79778f9 /]# 
</code></pre>

<h3>Debian</h3>

<p>To create a debian base images you need <a href="https://wiki.debian.org/Debootstrap">debootstrap</a>. There is a <a href="https://aur.archlinux.org/">aur</a> available.</p>

<h4>Install yaort</h4>

<p><a href="https://wiki.archlinux.org/index.php/Yaourt">Yaourt</a> is a nice tool to install aur ports.</p>

<h5>Install the base development tools</h5>

<pre><code>[staf@fanny ~]$ sudo pacman -Sy base-devel
:: Synchronizing package databases...
 core                                                                      210.4 KiB   198K/s 00:01 [##########################################################] 100%
 extra                                                                       2.3 MiB   385K/s 00:06 [##########################################################] 100%
 community                                                                   3.2 MiB   208K/s 00:16 [##########################################################] 100%
 alarm                                                                     105.4 KiB   335K/s 00:00 [##########################################################] 100%
 aur                                                                        31.2 KiB  49.1K/s 00:01 [##########################################################] 100%
:: There are 25 members in group base-devel:
:: Repository core
   1) autoconf  2) automake  3) binutils  4) bison  5) fakeroot  6) file  7) findutils  8) flex  9) gawk  10) gcc  11) gettext  12) grep  13) groff  14) gzip
   15) libtool  16) m4  17) make  18) pacman  19) patch  20) pkg-config  21) sed  22) sudo  23) texinfo  24) util-linux  25) which

Enter a selection (default=all): 
warning: autoconf-2.69-2 is up to date -- reinstalling
warning: automake-1.15-1 is up to date -- reinstalling
warning: binutils-2.25.1-3 is up to date -- reinstalling
warning: bison-3.0.4-1 is up to date -- reinstalling
warning: fakeroot-1.20.2-1 is up to date -- reinstalling
warning: file-5.25-1 is up to date -- reinstalling
warning: findutils-4.4.2-6 is up to date -- reinstalling
warning: flex-2.6.0-1 is up to date -- reinstalling
warning: gawk-4.1.3-1 is up to date -- reinstalling
warning: gcc-5.3.0-3 is up to date -- reinstalling
warning: gettext-0.19.6-2 is up to date -- reinstalling
warning: grep-2.22-1 is up to date -- reinstalling
warning: groff-1.22.3-5 is up to date -- reinstalling
warning: gzip-1.6-1 is up to date -- reinstalling
warning: libtool-2.4.6-4 is up to date -- reinstalling
warning: m4-1.4.17-1 is up to date -- reinstalling
warning: make-4.1-1 is up to date -- reinstalling
warning: pacman-4.2.1-4 is up to date -- reinstalling
warning: patch-2.7.5-1 is up to date -- reinstalling
warning: pkg-config-0.29-1 is up to date -- reinstalling
warning: sed-4.2.2-3 is up to date -- reinstalling
warning: sudo-1.8.15-1 is up to date -- reinstalling
warning: texinfo-6.0-1 is up to date -- reinstalling
warning: util-linux-2.27.1-1 is up to date -- reinstalling
warning: which-2.21-1 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Packages (25) autoconf-2.69-2  automake-1.15-1  binutils-2.25.1-3  bison-3.0.4-1  fakeroot-1.20.2-1  file-5.25-1  findutils-4.4.2-6  flex-2.6.0-1  gawk-4.1.3-1
              gcc-5.3.0-3  gettext-0.19.6-2  grep-2.22-1  groff-1.22.3-5  gzip-1.6-1  libtool-2.4.6-4  m4-1.4.17-1  make-4.1-1  pacman-4.2.1-4  patch-2.7.5-1
              pkg-config-0.29-1  sed-4.2.2-3  sudo-1.8.15-1  texinfo-6.0-1  util-linux-2.27.1-1  which-2.21-1

Total Installed Size:  166.11 MiB
Net Upgrade Size:        0.00 MiB

:: Proceed with installation? [Y/n] y
(25/25) checking keys in keyring                                                                    [##########################################################] 100%
(25/25) checking package integrity                                                                  [##########################################################] 100%
(25/25) loading package files                                                                       [##########################################################] 100%
(25/25) checking for file conflicts                                                                 [##########################################################] 100%
(25/25) checking available disk space                                                               [##########################################################] 100%
( 1/25) reinstalling gawk                                                                           [##########################################################] 100%
( 2/25) reinstalling m4                                                                             [##########################################################] 100%
( 3/25) reinstalling autoconf                                                                       [##########################################################] 100%
( 4/25) reinstalling automake                                                                       [##########################################################] 100%
( 5/25) reinstalling binutils                                                                       [##########################################################] 100%
( 6/25) reinstalling bison                                                                          [##########################################################] 100%
( 7/25) reinstalling sed                                                                            [##########################################################] 100%
( 8/25) reinstalling util-linux                                                                     [##########################################################] 100%
( 9/25) reinstalling fakeroot                                                                       [##########################################################] 100%
(10/25) reinstalling file                                                                           [##########################################################] 100%
(11/25) reinstalling findutils                                                                      [##########################################################] 100%
(12/25) reinstalling flex                                                                           [##########################################################] 100%
(13/25) reinstalling gcc                                                                            [##########################################################] 100%
(14/25) reinstalling gettext                                                                        [##########################################################] 100%
(15/25) reinstalling grep                                                                           [##########################################################] 100%
(16/25) reinstalling groff                                                                          [##########################################################] 100%
(17/25) reinstalling gzip                                                                           [##########################################################] 100%
(18/25) reinstalling libtool                                                                        [##########################################################] 100%
(19/25) reinstalling texinfo                                                                        [##########################################################] 100%
(20/25) reinstalling make                                                                           [##########################################################] 100%
(21/25) reinstalling pacman                                                                         [##########################################################] 100%
(22/25) reinstalling patch                                                                          [##########################################################] 100%
(23/25) reinstalling pkg-config                                                                     [##########################################################] 100%
(24/25) reinstalling sudo                                                                           [##########################################################] 100%
(25/25) reinstalling which                                                                          [##########################################################] 100%
[staf@fanny ~]$ 
</code></pre>

<h5>Install git</h5>

<pre><code>staf@fanny ~]$ sudo pacman -S git        
warning: git-2.6.4-1 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Packages (1) git-2.6.4-1

Total Installed Size:  22.92 MiB
Net Upgrade Size:       0.00 MiB

:: Proceed with installation? [Y/n] y
(1/1) checking keys in keyring                                                                      [##########################################################] 100%
(1/1) checking package integrity                                                                    [##########################################################] 100%
(1/1) loading package files                                                                         [##########################################################] 100%
(1/1) checking for file conflicts                                                                   [##########################################################] 100%
(1/1) checking available disk space                                                                 [##########################################################] 100%
(1/1) reinstalling git                                                                              [##########################################################] 100%
[staf@fanny ~]$ 
</code></pre>

<h5>Install package-query</h5>

<h6>git clone</h6>

<pre><code>[staf@fanny aur]$ git clone https://aur.archlinux.org/package-query.git 
Cloning into 'package-query'...
remote: Counting objects: 16, done.
remote: Compressing objects: 100% (16/16), done.
remote: Total 16 (delta 0), reused 16 (delta 0)
Unpacking objects: 100% (16/16), done.
Checking connectivity... done.
[staf@fanny aur]$ 
</code></pre>

<h5>makepkg</h5>

<pre><code>[staf@fanny aur]$ cd package-query/
[staf@fanny package-query]$ makepkg -sri
==&gt; Making package: package-query 1.7-1 (Fri Dec 25 14:33:39 UTC 2015)
==&gt; Checking runtime dependencies...
==&gt; Checking buildtime dependencies...
==&gt; Retrieving sources...
  -&gt; Downloading package-query-1.7.tar.gz...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  380k  100  380k    0     0   413k      0 --:--:-- --:--:-- --:--:--  413k
==&gt; Validating source files with md5sums...
    package-query-1.7.tar.gz ... Passed
==&gt; Extracting sources...
  -&gt; Extracting package-query-1.7.tar.gz with bsdtar
==&gt; Starting build()...
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
&lt;snip&gt;
config.status: executing depfiles commands
config.status: executing libtool commands
config.status: executing po-directories commands

package-query:

  Build information:
    source code location   : .
    prefix                 : /usr
    sysconfdir             : /etc
       conf file           : /etc/pacman.conf
    localstatedir          : /var
       database dir        : /var/lib/pacman/
    compiler               : gcc
    compiler flags         : -march=armv7-a -mfloat-abi=hard -mfpu=vfpv3-d16 -O2 -pipe -fstack-protector --param=ssp-buffer-size=4

    package-query version  : 1.7
    using git version      : no
       git ver             : 

  Variable information:
    root working directory : /
    aur base url           : https://aur.archlinux.org

make  all-recursive
make[1]: Entering directory '/home/staf/git/aur/package-query/src/package-query-1.7'
Making all in src
make[2]: Entering directory '/home/staf/git/aur/package-query/src/package-query-1.7/src'
gcc -DLOCALEDIR=\"/usr/share/locale\" -DCONFFILE=\"/etc/pacman.conf\" -DROOTDIR=\"/\" -DDBPATH=\"/var/lib/pacman/\" -DAUR_BASE_URL=\"https://aur.archlinux.org\" -DHAVE_CONFIG_H  -I. -I..   -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -march=armv7-a -mfloat-abi=hard -mfpu=vfpv3-d16 -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -MT aur.o -MD -MP -MF .deps/aur.Tpo -c -o aur.o aur.c
mv -f .deps/aur.Tpo .deps/aur.Po
gcc -DLOCALEDIR=\"/usr/share/locale\" -DCONFFILE=\"/etc/pacman.conf\" -DROOTDIR=\"/\" -DDBPATH=\"/var/lib/pacman/\" -DAUR_BASE_URL=\"https://aur.archlinux.org\" -DHAVE_CONFIG_H  -I. -I..   -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -march=armv7-a -mfloat-abi=hard -mfpu=vfpv3-d16 -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -MT alpm-query.o -MD -MP -MF .deps/alpm-query.Tpo -c -o alpm-query.o alpm-query.c
alpm-query.c: In function 'alpm_pkg_get_realsize':
 /usr/bin/mkdir -p '/home/staf/git/aur/package-query/pkg/package-query/usr/share/man/man8'
&lt;snip&gt;
 /usr/bin/install -c -m 644 package-query.8 '/home/staf/git/aur/package-query/pkg/package-query/usr/share/man/man8'
make[2]: Leaving directory '/home/staf/git/aur/package-query/src/package-query-1.7/doc'
make[1]: Leaving directory '/home/staf/git/aur/package-query/src/package-query-1.7/doc'
make[1]: Entering directory '/home/staf/git/aur/package-query/src/package-query-1.7'
make[2]: Entering directory '/home/staf/git/aur/package-query/src/package-query-1.7'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/home/staf/git/aur/package-query/src/package-query-1.7'
make[1]: Leaving directory '/home/staf/git/aur/package-query/src/package-query-1.7'
==&gt; Tidying install...
  -&gt; Purging unwanted files...
  -&gt; Removing libtool files...
  -&gt; Removing static library files...
  -&gt; Compressing man and info pages...
  -&gt; Stripping unneeded symbols from binaries and libraries...
==&gt; Creating package "package-query"...
  -&gt; Generating .PKGINFO file...
  -&gt; Generating .MTREE file...
  -&gt; Compressing package...
==&gt; Leaving fakeroot environment.
==&gt; Finished making: package-query 1.7-1 (Fri Dec 25 14:34:02 UTC 2015)
==&gt; Installing package package-query with pacman -U...
[sudo] password for staf: 
loading packages...
warning: package-query-1.7-1 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Packages (1) package-query-1.7-1

Total Installed Size:  0.07 MiB
Net Upgrade Size:      0.00 MiB

:: Proceed with installation? [Y/n] y
(1/1) checking keys in keyring                                                                      [##########################################################] 100%
(1/1) checking package integrity                                                                    [##########################################################] 100%
(1/1) loading package files                                                                         [##########################################################] 100%
(1/1) checking for file conflicts                                                                   [##########################################################] 100%
(1/1) checking available disk space                                                                 [##########################################################] 100%
(1/1) reinstalling package-query                                                                    [##########################################################] 100%
[staf@fanny package-query]$ 
</code></pre>

<h5>Install yaourt</h5>

<h6>git clone</h6>

<pre><code>[staf@fanny package-query]$ cd ~/git/aur   
staf@fanny aur]$ git clone https://aur.archlinux.org/yaourt.git  
Cloning into 'yaourt'...
remote: Counting objects: 14, done.
remote: Compressing objects: 100% (11/11), done.
remote: Total 14 (delta 3), reused 14 (delta 3)
Unpacking objects: 100% (14/14), done.
Checking connectivity... done.
[staf@fanny aur]$ 
</code></pre>

<h6>makepkg</h6>

<pre><code>[staf@fanny yaourt]$ makepkg -sri
==&gt; Making package: yaourt 1.7-1 (Fri Dec 25 14:44:12 UTC 2015)
==&gt; Checking runtime dependencies...
==&gt; Checking buildtime dependencies...
==&gt; Retrieving sources...
  -&gt; Downloading yaourt-1.7.tar.gz...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  123k  100  123k    0     0   222k      0 --:--:-- --:--:-- --:--:--  222k
==&gt; Validating source files with md5sums...
    yaourt-1.7.tar.gz ... Passed
==&gt; Extracting sources...
  -&gt; Extracting yaourt-1.7.tar.gz with bsdtar
==&gt; Starting build()...
        GEN yaourt.sh
        GEN pacdiffviewer.sh
        GEN yaourtrc
        GEN lib/util.sh
        GEN lib/pkgbuild.sh
        GEN lib/pacman.sh
        GEN lib/abs.sh
==&gt; Entering fakeroot environment...
==&gt; Starting package()...
/usr/bin/env install -d /home/staf/git/aur/yaourt/pkg/yaourt/usr/bin
/usr/bin/env install -d /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -d /home/staf/git/aur/yaourt/pkg/yaourt/etc
/usr/bin/env install -d /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/bash-completion/completions
/usr/bin/env install -d /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/man/man{5,8}
# Scripts
/usr/bin/env install -m755 yaourt.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/bin/yaourt
/usr/bin/env install -m755 pacdiffviewer.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/bin/pacdiffviewer
# Configuration
/usr/bin/env install -m644 yaourtrc /home/staf/git/aur/yaourt/pkg/yaourt/etc/yaourtrc
/usr/bin/env install -m644 bashcompletion /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/bash-completion/completions/yaourt
# Libs
/usr/bin/env install -m644 lib/alpm_backup.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/alpm_query.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/alpm_stats.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/abs.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/aur.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/util.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/io.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/pacman.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/pkgbuild.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
/usr/bin/env install -m644 lib/misc.sh /home/staf/git/aur/yaourt/pkg/yaourt/usr/lib/yaourt
# Man
/usr/bin/env install -m644 man/*.5 /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/man/man5
/usr/bin/env install -m644 man/*.8 /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/man/man8
# Locales
test -x /usr/bin/msgfmt &amp;&amp; for file in po/*/*.po; \
do \
  package=$(echo $file | /bin/sed -e 's#po/\([^/]\+\).*#\1#'); \
  lang=$(echo $file | /bin/sed -e 's#.*/\([^/]\+\).po#\1#'); \
  /usr/bin/env install -d /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/locale/$lang/LC_MESSAGES; \
  /usr/bin/msgfmt -o /home/staf/git/aur/yaourt/pkg/yaourt/usr/share/locale/$lang/LC_MESSAGES/$package.mo $file; \
done
==&gt; Tidying install...
  -&gt; Purging unwanted files...
  -&gt; Removing libtool files...
  -&gt; Removing static library files...
  -&gt; Compressing man and info pages...
  -&gt; Stripping unneeded symbols from binaries and libraries...
==&gt; Creating package "yaourt"...
  -&gt; Generating .PKGINFO file...
  -&gt; Generating .MTREE file...
  -&gt; Compressing package...
==&gt; Leaving fakeroot environment.
==&gt; Finished making: yaourt 1.7-1 (Fri Dec 25 14:44:16 UTC 2015)
==&gt; Installing package yaourt with pacman -U...
[sudo] password for staf: 
loading packages...
warning: yaourt-1.7-1 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Packages (1) yaourt-1.7-1

Total Installed Size:  0.72 MiB
Net Upgrade Size:      0.00 MiB

:: Proceed with installation? [Y/n] y
(1/1) checking keys in keyring                                                                      [##########################################################] 100%
(1/1) checking package integrity                                                                    [##########################################################] 100%
(1/1) loading package files                                                                         [##########################################################] 100%
(1/1) checking for file conflicts                                                                   [##########################################################] 100%
(1/1) checking available disk space                                                                 [##########################################################] 100%
(1/1) reinstalling yaourt                                                                           [##########################################################] 100%
[staf@fanny yaourt]$ 
</code></pre>

<h4>Install debootstrap</h4>

<pre><code>[staf@fanny ~]$ yaourt debootstrap
1 aur/cdebootstrap-static 0.6.5-1 (10)
    Bootstrap a Debian system
2 aur/debootstrap 1.0.75-1 [installed] (224)
    A tool used to create a Debian base system from scratch, without requiring the availability of dpkg or apt
3 aur/rinse 3.0.2-2 (0)
    Bootstrap a rpm based distribution like debootstrap
==&gt; Enter n of packages to be installed (ex: 1 2 3 or 1-3)
==&gt; --------------------------------------------------------
==&gt; 2


==&gt; Downloading debootstrap PKGBUILD from AUR...
x .SRCINFO
x .gitignore
x PKGBUILD
zeilenleser commented on 2015-07-29 10:49 
Thanks for maintaining this package.

just for your information, version 1.0.72 is out since 2015-07-28

Regards

zeilenleser commented on 2015-07-29 12:13 
I followed @Tigrouzens suggestion with this modification

DEF_MIRROR="http://mirrors.kernel.org/ubuntu"

Since only DEF_HTTPS_MIRROR is used in my case I don't know if this works. Testing with the browser was successful.

bricewge commented on 2015-12-07 16:58 (last edited on 2015-12-07 16:58 by bricewge) 
@Tigrouzens why don't you want to install ubuntu-keyring?

Your advice didn't work for me, I still had the error about GPG. But after installing gnupg1 and ubuntu-keyring, enrering the following command worked fine.
# debootstrap wily ubuntu https://mirrors.kernel.org/ubuntu

abeutot commented on 2015-12-08 11:57 
Seems like there is a missing dependency to binutils since ar is needed to extract deb packages.

JonnyJD commented on 2015-12-08 12:12 
binutils is in the "base-devel" group which is an implicit requirement before using the AUR altogether:
https://wiki.archlinux.org/index.php/Arch_User_Repository#Prerequisites

debootstrap 1.0.75-1  (2015-11-12 16:15)
( Unsupported package: Potentially dangerous ! )
==&gt; Edit PKGBUILD ? [Y/n] ("A" to abort)
==&gt; ------------------------------------
==&gt; n

==&gt; debootstrap dependencies:
 - wget (already installed)


==&gt; Continue building debootstrap ? [Y/n]
==&gt; -------------------------------------
==&gt; 
==&gt; Building and installing package
==&gt; Making package: debootstrap 1.0.75-1 (Fri Dec 25 14:48:55 UTC 2015)
==&gt; Checking runtime dependencies...
==&gt; Checking buildtime dependencies...
==&gt; Retrieving sources...
  -&gt; Downloading debootstrap_1.0.75_all.deb...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 65978  100 65978    0     0   155k      0 --:--:-- --:--:-- --:--:--  155k
==&gt; Validating source files with md5sums...
    debootstrap_1.0.75_all.deb ... Passed
==&gt; Extracting sources...
  -&gt; Extracting debootstrap_1.0.75_all.deb with bsdtar
==&gt; Entering fakeroot environment...
==&gt; Starting package()...
==&gt; Tidying install...
  -&gt; Purging unwanted files...
  -&gt; Removing libtool files...
  -&gt; Removing static library files...
  -&gt; Compressing man and info pages...
  -&gt; Stripping unneeded symbols from binaries and libraries...
==&gt; Creating package "debootstrap"...
  -&gt; Generating .PKGINFO file...
  -&gt; Generating .MTREE file...
  -&gt; Compressing package...
==&gt; Leaving fakeroot environment.
==&gt; Finished making: debootstrap 1.0.75-1 (Fri Dec 25 14:48:57 UTC 2015)

==&gt; Continue installing debootstrap ? [Y/n]
==&gt; [v]iew package contents [c]heck package with namcap
==&gt; ---------------------------------------------------
==&gt; y

loading packages...
warning: debootstrap-1.0.75-1 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Packages (1) debootstrap-1.0.75-1

Total Installed Size:  0.19 MiB
Net Upgrade Size:      0.00 MiB

:: Proceed with installation? [Y/n] y
(1/1) checking keys in keyring                                                                      [##########################################################] 100%
(1/1) checking package integrity                                                                    [##########################################################] 100%
(1/1) loading package files                                                                         [##########################################################] 100%
(1/1) checking for file conflicts                                                                   [##########################################################] 100%
(1/1) checking available disk space                                                                 [##########################################################] 100%
(1/1) reinstalling debootstrap                                                                      [##########################################################] 100%
[staf@fanny ~]$ 
</code></pre>

<h4>gpg keyring</h4>

<p>debootrap needs gnupg1 there is an aur available <a href="https://aur.archlinux.org/packages/gnupg1/"><a href="https://aur.archlinux.org/packages/gnupg1/">https://aur.archlinux.org/packages/gnupg1/</a></a> but armv7h isn&rsquo;t include in the supported architectures so we&rsquo;ll need to add it.</p>

<h5>Install gnupg1</h5>

<h6>Git clone</h6>

<pre><code>[staf@fanny ~]$ cd ~/git/aur
staf@fanny aur]$ git clone https://aur.archlinux.org/gnupg1.git
Cloning into 'gnupg1'...
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (8/8), done.
remote: Total 8 (delta 0), reused 8 (delta 0)
Unpacking objects: 100% (8/8), done.
Checking connectivity... done.
[staf@fanny aur]$ 
</code></pre>

<h6>Update PKGBUILD</h6>

<p>Edit PKGBUILD</p>

<pre><code>[staf@fanny gnupg1]$ vi PKGBUILD 
</code></pre>

<p>and add armv7h to the arch</p>

<pre><code>pkgdesc="GNU Privacy Guard - a PGP replacement tool"
arch=('i686' 'x86_64' 'armv6h' 'armv7h')
license=('GPL3')
depends=('zlib' 'bzip2' 'libldap&gt;=2.4.18' 'libusb-compat' 'curl&gt;=7.16.2' 'readline&gt;=6.0.00')
</code></pre>

<h6>Update the keyring</h6>

<pre><code>[staf@fanny gnupg1]$ gpg --keyserver pgpkeys.mit.edu --recv-keys 2071B08A33BD3F06 
gpg: key 33BD3F06: "NIIBE Yutaka (GnuPG Release Key) &lt;gniibe@fsij.org&gt;" not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
[staf@fanny gnupg1]$ 
</code></pre>

<h6>makepkg</h6>

<pre><code>[staf@fanny gnupg1]$ makepkg -sri
&lt;snip&gt;
  -&gt; Adding install file...
  -&gt; Generating .MTREE file...
  -&gt; Compressing package...
==&gt; Leaving fakeroot environment.
==&gt; Finished making: gnupg1 1.4.19-4 (Sat Dec 26 13:49:19 UTC 2015)
==&gt; Installing package gnupg1 with pacman -U...
[sudo] password for staf: 
loading packages...
resolving dependencies...
looking for conflicting packages...

Packages (1) gnupg1-1.4.19-4

Total Installed Size:  4.97 MiB

:: Proceed with installation? [Y/n] y
(1/1) checking keys in keyring                                                         [##################################################] 100%
(1/1) checking package integrity                                                       [##################################################] 100%
(1/1) loading package files                                                            [##################################################] 100%
(1/1) checking for file conflicts                                                      [##################################################] 100%
(1/1) checking available disk space                                                    [##################################################] 100%
(1/1) installing gnupg1                                                                [##################################################] 100%
[staf@fanny gnupg1]$ 
</code></pre>

<h5>Install the  debian-archive-keyring aur</h5>

<pre><code>[staf@fanny debian]$ yaourt debian-archive-keyring 
1 aur/debian-archive-keyring 2014.3-2 (59)
    GnuPG archive keys of the Debian archive
==&gt; Enter n of packages to be installed (ex: 1 2 3 or 1-3)
==&gt; --------------------------------------------------------
==&gt; 1


==&gt; Downloading debian-archive-keyring PKGBUILD from AUR...
x .SRCINFO
x PKGBUILD
eworm commented on 2013-05-13 12:20 
Please use package() function, recent makepkg warns about that.

hcartiaux commented on 2013-05-15 08:00 
Fixed

ansys commented on 2014-10-24 11:31 
New url http://ftp.fr.debian.org/debian/pool/main/d/debian-archive-keyring/debian-archive-keyring_2014.1_all.deb

kozaki commented on 2014-12-11 14:58 
Update
url: http://ftp.fr.debian.org/debian/pool/main/d/debian-archive-keyring/debian-archive-keyring_2014.3_all.deb
md5: 02b6818bd7cada9ef9d24534290b559c

Thank you.

debian-archive-keyring 2014.3-2  (2015-06-08 20:20)
( Unsupported package: Potentially dangerous ! )
==&gt; Edit PKGBUILD ? [Y/n] ("A" to abort)
==&gt; ------------------------------------
==&gt; n

==&gt; debian-archive-keyring dependencies:
 - gnupg (already installed)


==&gt; Continue building debian-archive-keyring ? [Y/n]
==&gt; ------------------------------------------------
==&gt; 
==&gt; Building and installing package
==&gt; Making package: debian-archive-keyring 2014.3-2 (Sat Dec 26 13:02:52 UTC 2015)
==&gt; Checking runtime dependencies...
==&gt; Checking buildtime dependencies...
==&gt; Retrieving sources...
  -&gt; Downloading debian-archive-keyring_2014.3_all.deb...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 40060  100 40060    0     0   103k      0 --:--:-- --:--:-- --:--:--  103k
==&gt; Validating source files with md5sums...
    debian-archive-keyring_2014.3_all.deb ... Passed
==&gt; Extracting sources...
  -&gt; Extracting debian-archive-keyring_2014.3_all.deb with bsdtar
==&gt; Entering fakeroot environment...
==&gt; Starting package()...
./
./usr/
./usr/share/
&lt;snip&gt;

==&gt; Continue installing debian-archive-keyring ? [Y/n]
==&gt; [v]iew package contents [c]heck package with namcap
==&gt; ---------------------------------------------------
==&gt; y

loading packages...
resolving dependencies...
looking for conflicting packages...

Packages (1) debian-archive-keyring-2014.3-2

Total Installed Size:  0.07 MiB

:: Proceed with installation? [Y/n] y
(1/1) checking keys in keyring                                                                                                                                                                                                                                  [##################################################################################################################################################################] 100%
(1/1) checking package integrity                                                                                                                                                                                                                                [##################################################################################################################################################################] 100%
(1/1) loading package files                                                                                                                                                                                                                                     [##################################################################################################################################################################] 100%
(1/1) checking for file conflicts                                                                                                                                                                                                                               [##################################################################################################################################################################] 100%
(1/1) checking available disk space                                                                                                                                                                                                                             [##################################################################################################################################################################] 100%
(1/1) installing debian-archive-keyring                                                                                                                                                                                                                         [##################################################################################################################################################################] 100%
[staf@fanny debian]$ 
</code></pre>

<h4>debootstrap</h4>

<pre><code>[staf@fanny debian]$ sudo debootstrap --verbose --include=iproute,iputils-ping --arch armhf jessie ./jessie-chroot http://http.debian.net/debian/
[staf@fanny debian]$ sudo debootstrap --verbose --include=iproute,iputils-ping --arch armhf jessie ./jessie-chroot http://http.debian.net/debian/
[sudo] password for staf: 
I: Retrieving Release 
I: Retrieving Release.gpg 
I: Checking Release signature
I: Valid Release signature (key id 75DDC3C4A499F1A18CB5F3C8CBF8D6FD518E17E1)
&lt;snip&gt;
I: Configuring libgnutls-openssl27:armhf...
I: Configuring iputils-ping...
I: Configuring isc-dhcp-common...
I: Configuring isc-dhcp-client...
I: Configuring tasksel...
I: Configuring tasksel-data...
I: Configuring libc-bin...
I: Configuring systemd...
I: Base system installed successfully.
</code></pre>

<h4>Import</h4>

<pre><code>staf@fanny jessie-chroot]$ sudo tar cpf - . | docker import - debian
[sudo] password for staf: 
1ec165fa2ccb264ab8196b8cd0c339b5d95e1b90879019cde0c633cca738277a
[staf@fanny jessie-chroot]$ 
</code></pre>

<h4>Try it</h4>

<pre><code>staf@fanny jessie-chroot]$ docker run -t -i --rm debian /bin/bash
root@81afce29909f:/# cat /etc/debian_version 
8.2
root@81afce29909f:/# 
</code></pre>

<p><strong><em> Have fun &hellip; </em></strong></p>

<h4>Links</h4>

<ul>
<li><a href="http://archlinuxarm.org/"><a href="http://archlinuxarm.org/">http://archlinuxarm.org/</a></a></li>
<li><a href="http://archlinuxarm.org/platforms/armv7/samsung/odroid-u3"><a href="http://archlinuxarm.org/platforms/armv7/samsung/odroid-u3">http://archlinuxarm.org/platforms/armv7/samsung/odroid-u3</a></a></li>
<li><a href="https://wiki.archlinux.org/index.php/Docker"><a href="https://wiki.archlinux.org/index.php/Docker">https://wiki.archlinux.org/index.php/Docker</a></a></li>
<li><a href="http://forum.odroid.com/viewtopic.php?f=98&t=6638"><a href="http://forum.odroid.com/viewtopic.php?f=98&amp;t=6638">http://forum.odroid.com/viewtopic.php?f=98&amp;t=6638</a>">[Docker] lightweight virtualisation for your odroid host</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Run Google Chrome Inside a Fedora Docker Container Over Ssh]]></title>
    <link href="https://stafwag.github.io/blog/blog/2015/05/12/run-google-chrome-inside-a-fedora-docker-container-over-ssh/"/>
    <updated>2015-05-12T14:55:00+02:00</updated>
    <id>https://stafwag.github.io/blog/blog/2015/05/12/run-google-chrome-inside-a-fedora-docker-container-over-ssh</id>
    <content type="html"><![CDATA[<p><strong></p>

<hr />


<p>Update (Mon Jun  8 2015):</p>

<p>Running google-chrome inside a docker container isn&rsquo;t stable for me.
I switched back to LXC to run google-chrome which seems to be more stable.</p>

<hr />


<p></strong></p>

<p>Created a docker image to start a docker container with chrome.
Destroying the container each time that you start a browser is a easy way to get rid of your cookies and browser history.</p>

<h2>Run google chrome inside a fedora docker container over ssh</h2>

<h3>Installation instructions</h3>

<p>1/ Clone the git repo</p>

<pre><code>$ git clone https://github.com/stafwag/docker-fedora-chrome-ssh.git
</code></pre>

<p>2/ Copy your public ssh to id_rsa.pub</p>

<pre><code>$ cd docker-fedora-chrome-ssh
$ cp ~/.ssh/id_rsa.pub .
</code></pre>

<p>3/ Build the docker image</p>

<pre><code>$ docker build -t stafwag/docker-fedora-chrome-ssh .
</code></pre>

<p>4/ Update your ssh config</p>

<pre><code>$ vi ~/.ssh/config
</code></pre>

<pre><code>Host mychrome
          User      chrome
          Port      8022
          HostName  127.0.0.1
          StrictHostKeyChecking no
          UserKnownHostsFile=/dev/null
          ForwardX11 yes
</code></pre>

<p>5/ Start chrome</p>

<pre><code>$ ./startchrome.sh
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Lxc Templates in Fedora 20]]></title>
    <link href="https://stafwag.github.io/blog/blog/2014/06/09/lxc-templates-in-fedora-20/"/>
    <updated>2014-06-09T14:28:00+02:00</updated>
    <id>https://stafwag.github.io/blog/blog/2014/06/09/lxc-templates-in-fedora-20</id>
    <content type="html"><![CDATA[<p>I&rsquo;m a big fan of containers and used them a lot on <a href="http://en.wikipedia.org/wiki/Solaris_%28operating_system%29">Solaris</a> and <a href="http://www.freebsd.org/doc/handbook/jails.html">jails on Freebsd</a>. Containers/jails are the fastest way to spinup an new system and the easiest way to isolate services.</p>

<p>As always with virtualization you&rsquo;ve to careful with sharing systems or containers that doesn&rsquo;t below to the same customer or service on the same physical machine since you&rsquo;re never sure which traces are left behind in the memory etc.</p>

<p><a href="https://linuxcontainers.org/">Linux containers</a> are getting more popular since the release of <a href="http://www.docker.com/">docker</a></p>

<p>When I tried to create a few containers on Fedora 20, the first attempt (a debian container) wasn&rsquo;t an success.</p>

<p>On a newly create debian container networking didn&rsquo;t work.</p>

<h3>First debian container</h3>

<h4>Creating the container</h4>

<pre><code>[root@vicky ~]# lxc-create -n mydebian -t debian

lxc-create: No config file specified, using the default config /etc/lxc/default.conf
debootstrap is /sbin/debootstrap
Checking cache download in /var/cache/lxc/debian/rootfs-squeeze-i386 ... 
Copying rootfs to /var/lib/lxc/mydebian/rootfs...Generating locales (this might 
&amp;lt; snip &amp;gt;
'debian' template installed
'mydebian' created
</code></pre>

<h4>Booting</h4>

<pre><code>[root@vicky ~]# lxc-start -n mydebian
INIT: version 2.88 booting
Using makefile-style concurrent boot in runlevel S.
Cleaning up ifupdown....
Setting up networking....
Activating lvm and md swap...done.
Checking file systems...fsck from util-linux-ng 2.17.2
done.
Mounting local filesystems...done.
Activating swapfile swap...done.
Cleaning up temporary files....
Configuring network interfaces...ifup: failed to open statefile /etc/network/run/ifstate: No such file or directory
failed.
Setting kernel variables ...done.
Cleaning up temporary files....
INIT: Entering runlevel: 3
Using makefile-style concurrent boot in runlevel 3.
Starting OpenBSD Secure Shell server: sshd.

Debian GNU/Linux 6.0 mydebian console

mydebian login: root
Password: 
Last login: Tue Jun 21 08:05:41 UTC 2014 on console
Linux mydebian 3.14.5-200.fc20.i686 #1 SMP Mon Jun 21 08:13:19 UTC 2014 i686
</code></pre>

<h3>Network isn&rsquo;t working&hellip;</h3>

<pre><code>The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
root@mydebian:~# ifconfig -a
eth0      Link encap:Ethernet  HWaddr c2:71:98:d8:8f:c3  
          inet6 addr: fe80::c071:98ff:fed8:8fc3/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:13 errors:0 dropped:0 overruns:0 frame:0
          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:908 (908.0 B)  TX bytes:738 (738.0 B)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@mydebian:~# ifup eth0
ifup: failed to open statefile /etc/network/run/ifstate: No such file or directory
root@mydebian:~# 
root@mydebian:~# cat /etc/network/interfaces 
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp
root@mydebian:~# 
</code></pre>

<h3>Fedora container</h3>

<p>A Fedora container worked better.</p>

<h4>Creating the fedora container</h4>

<pre><code>root@vicky ~]# lxc-create -n myfedora -t fedora

lxc-create: No config file specified, using the default config /etc/lxc/default.conf
Host CPE ID from /etc/os-release: cpe:/o:fedoraproject:fedora:20
Checking cache download in /var/cache/lxc/fedora/i686/20/rootfs ... 
Downloading fedora minimal ...
Fetching rpm name from http://be.mirror.eurid.eu/fedora/linux/releases/20/Everything/i386/os//Packages/f...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   290  100   290    0     0    904      0 --:--:-- --:--:-- --:--:--   903
  0     0    0  145k    0     0  47212      0 --:--:--  0:00:03 --:--:-- 58525

&lt;snip&gt;
Updated:
  fedora-release.noarch 0:20-3                                                  

Complete!
Download complete.
Copy /var/cache/lxc/fedora/i686/20/rootfs to /var/lib/lxc/myfedora/rootfs ... 
Copying rootfs to /var/lib/lxc/myfedora/rootfs ...setting root passwd to root
installing fedora-release package
Package fedora-release-20-3.noarch already installed and latest version
Nothing to do
unlink: cannot unlink /var/lib/lxc/myfedora/rootfs/etc/systemd/system/default.target: No such file or directory
container rootfs and config created
'fedora' template installed
'myfedora' created
[root@vicky ~]# 
</code></pre>

<h4>Booting</h4>

<pre><code>[root@vicky ~]# lxc-start -n myfedora
systemd 208 running in system mode. (+PAM +LIBWRAP +AUDIT +SELINUX +IMA +SYSVINIT +LIBCRYPTSETUP +GCRYPT +ACL +XZ)
Detected virtualization 'lxc'.

Welcome to Fedora 20 (Heisenbug)!

Set hostname to &lt;myfedora&gt;.
[  OK  ] Reached target Remote File Systems.
[  OK  ] Listening on Delayed Shutdown Socket.
[  OK  ] Created slice Root Slice.
[  OK  ] Created slice User and Session Slice.
[  OK  ] Started Login Service.
&amp;lt; snip &amp;gt;
[  OK  ] Reached target Multi-User System.

Fedora release 20 (Heisenbug)
Kernel 3.14.5-200.fc20.i686 on an i686 (console)

myfedora login: root
Password: 
Last login: Wed Jun 21 09:12:42 on console
</code></pre>

<h4>Networking</h4>

<pre><code>[root@myfedora ~]# ping 8.8.8.8
connect: Network is unreachable
[root@myfedora ~]# ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
16: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 5a:89:44:04:99:2b brd ff:ff:ff:ff:ff:ff
    inet6 fe80::5889:44ff:fe04:992b/64 scope link 
       valid_lft forever preferred_lft forever
[root@myfedora ~]# ifup eth0

Determining IP information for eth0... done.
[root@myfedora ~]# ping 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=49 time=113 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=49 time=123 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=49 time=123 ms
^C
--- 8.8.8.8 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 113.751/120.096/123.408/4.488 ms
[root@myfedora ~]# 
</code></pre>

<h3>New templates</h3>

<p>Since I wanted a Debian container I clone the lxc git on github and copied the templates.</p>

<h4>Getting the templates</h4>

<pre><code>[staf@vicky github]$ git clone https://github.com/lxc/lxc 
Cloning into 'lxc'...
remote: Reusing existing pack: 17997, done.
remote: Counting objects: 17, done.
remote: Compressing objects: 100% (17/17), done.
remote: Total 18014 (delta 9), reused 0 (delta 0)
Receiving objects: 100% (18014/18014), 9.14 MiB | 77.00 KiB/s, done.
Resolving deltas: 100% (11555/11555), done.
Checking connectivity... done.
[staf@vicky github]$ 
</code></pre>

<h4>Configure</h4>

<p>Create the configure script and it dependencies</p>

<pre><code>[staf@vicky lxc]$ autoreconf -i
configure.ac:31: installing 'config/compile'
configure.ac:30: installing 'config/config.guess'
configure.ac:30: installing 'config/config.sub'
configure.ac:29: installing 'config/install-sh'
configure.ac:29: installing 'config/missing'
src/lua-lxc/Makefile.am: installing 'config/depcomp'
[staf@vicky lxc]$ 
</code></pre>

<p>Run configure</p>

<pre><code>[staf@vicky lxc]$ ./configure 
checking for pkg-config... /usr/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
&lt;snip&gt;
Documentation:
 - examples: yes
 - API documentation: no
 - user documentation: no

Debugging:
 - tests: no
 - mutex debugging: no

Paths:
 - Logs in configpath: no
[staf@vicky lxc]$ 
</code></pre>

<h4>Copy the templates</h4>

<p>Copy the newly created templates
<code>
[staf@vicky templates]$ shopt -s extglob
[staf@vicky templates]$
[staf@vicky templates]$ ls !(*\.in|Makefile*)
lxc-alpine     lxc-centos    lxc-fedora        lxc-oracle  lxc-ubuntu-cloud
lxc-altlinux   lxc-cirros    lxc-gentoo        lxc-plamo
lxc-archlinux  lxc-debian    lxc-openmandriva  lxc-sshd
lxc-busybox    lxc-download  lxc-opensuse      lxc-ubuntu
[staf@vicky templates]$ sudo cp !(*\.in|Makefile*)  /usr/share/lxc/templates[sudo] password for staf:
[staf@vicky templates]$
</code></p>

<h3>Debian container second try&hellip;</h3>

<p>And tried to create the debian container again.</p>

<pre><code>[root@vicky ~]# lxc-ls --fancy
NAME      STATE    IPV4  IPV6  
-----------------------------
mydebian  STOPPED  -     -     
myfedora  STOPPED  -     -     
[root@vicky ~]# lxc-destroy -n mydebian
[root@vicky ~]# lxc-ls --fancy
NAME      STATE    IPV4  IPV6  
-----------------------------
myfedora  STOPPED  -     -     
[root@vicky ~]# 
</code></pre>

<h4>Creating the container</h4>

<pre><code>[root@vicky ~]# lxc-create -n mydebian -t debian

lxc-create: No config file specified, using the default config /etc/lxc/default.conf
debootstrap is /sbin/debootstrap
Checking cache download in /usr/local/var/cache/lxc/debian/rootfs-wheezy-i386 ... 
Downloading debian minimal ...
W: Cannot check Release signature; keyring file not available /usr/share/keyrings/debian-archive-keyring.gpg
I: Retrieving Release 
I: Validating Packages 
I: Resolving dependencies of required packages...
I: Resolving dependencies of base packages...
I: Found additional required dependencies: insserv libbz2-1.0 libdb5.1 libsemanage-common libsemanage1 libslang2 libustr-1.0-1 
I: Found additional base dependencies: adduser debian-archive-keyring gnupg gpgv isc-dhcp-common libapt-pkg4.12 libbsd0 libclass-isa-perl libedit2 libgdbm3 libgssapi-krb5-2 libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libncursesw5 libprocps0 libreadline6 libssl1.0.0 libstdc++6 libswitch-perl libusb-0.1-4 libwrap0 openssh-client perl perl-modules procps readline-common 
I: Checking component main on http://cdn.debian.net/debian...
I: Validating libacl1 2.2.51-8
I: Validating adduser 3.113+nmu3
&lt;snip&gt;
I: Unpacking debconf...
I: Unpacking debconf-i18n...
I: Unpacking debianutils...
I: Unpacking diffutils...
I: Unpacking dpkg...
I: Unpacking e2fslibs:i386...
&lt;snip&gt;
I: Configuring apt...
I: Configuring openssh-client...
I: Configuring openssh-server...
I: Configuring perl-modules...
I: Configuring libswitch-perl...
I: Configuring perl...
I: Configuring libui-dialog-perl...
I: Base system installed successfully.
Download complete.
Copying rootfs to /var/lib/lxc/mydebian/rootfs...Generating locales (this might take a while)...
  en_US.UTF-8... done
Generation complete.
update-rc.d: using dependency based boot sequencing
update-rc.d: using dependency based boot sequencing
update-rc.d: using dependency based boot sequencing
update-rc.d: using dependency based boot sequencing
Creating SSH2 RSA key; this may take some time ...
Creating SSH2 DSA key; this may take some time ...
Creating SSH2 ECDSA key; this may take some time ...
invoke-rc.d: policy-rc.d denied execution of restart.
Timezone in container is not configured. Adjust it manually.
Root password is 'root', please change !
'debian' template installed
'mydebian' created
[root@vicky ~]# 
</code></pre>

<h4>Booting</h4>

<pre><code>[root@vicky ~]# lxc-start -n mydebian
INIT: version 2.88 booting
Using makefile-style concurrent boot in runlevel S.
Cleaning up temporary files... /tmp /run /run/lock /run/shm.
Mount point '/dev/mqueue' does not exist. Skipping mount. ... (warning).
Mount point '/dev/hugepages' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/systemd' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/cpuset' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/cpu,cpuacct' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/memory' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/devices' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/freezer' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/net_cls' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/blkio' does not exist. Skipping mount. ... (warning).
Mount point '/sys/fs/cgroup/perf_event' does not exist. Skipping mount. ... (warning).
Filesystem type 'fuse.gvfsd-fuse' is not supported. Skipping mount. ... (warning).
Mount point '/run/media/staf/VBOXADDITIONS_4.3.12_93733' does not exist. Skipping mount. ... (warning).
Mount point '/var/lib/nfs/rpc_pipefs' does not exist. Skipping mount. ... (warning).
Mount point '/usr/lib/lxc/rootfs' does not exist. Skipping mount. ... (warning).
Mount point '/usr/lib/lxc/rootfs' does not exist. Skipping mount. ... (warning).
Mount point '/dev/console' does not exist. Skipping mount. ... (warning).
Activating lvm and md swap...done.
Checking file systems...fsck from util-linux 2.20.1
done.
Mounting local filesystems...done.

Debian GNU/Linux 7 mydebian console

mydebian login: root
Password: 
Linux mydebian 3.14.8-200.fc20.i686 #1 SMP Mon Jun 21 09:36:56 UTC 2014 i686

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
</code></pre>

<h4>Networking&hellip;.</h4>

<pre><code>root@mydebian:~# ifconfig eth0
eth0      Link encap:Ethernet  HWaddr 00:16:3e:34:d3:02  
          inet addr:192.168.122.198  Bcast:192.168.122.255  Mask:255.255.255.0
          inet6 addr: fe80::216:3eff:fe34:d302/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:32 errors:0 dropped:0 overruns:0 frame:0
          TX packets:13 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:3312 (3.2 KiB)  TX bytes:1806 (1.7 KiB)

root@mydebian:~# ping 8.8.8.8
-bash: ping: command not found
root@mydebian:~# apt-cache search ping | grep util
2ping - Ping utility to determine directional packet loss
galax-extra - XQuery implementation with static typing - utilities
inetutils-ping - ICMP echo tool
iputils-arping - Tool to send ICMP echo requests to an ARP address
iputils-ping - Tools to test the reachability of network hosts
libescape-ruby - HTML/URI/shell escaping utilities for Ruby
mapnik-utils - C++/Python toolkit for developing GIS applications (utilities)
ruby-escape-utils - Faster string escaping routines for your web apps
root@mydebian:~# apt-get install inetutils-ping
Reading package lists... Done
Building dependency tree... Done
The following NEW packages will be installed:
  inetutils-ping
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 169 kB of archives.
After this operation, 273 kB of additional disk space will be used.
WARNING: The following packages cannot be authenticated!
  inetutils-ping
Install these packages without verification [y/N]? y
Get:1 http://cdn.debian.net/debian/ wheezy/main inetutils-ping i386 2:1.9-2 [169 kB]
Fetched 169 kB in 6s (26.4 kB/s)                                               
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package inetutils-ping.
(Reading database ... 9387 files and directories currently installed.)
Unpacking inetutils-ping (from .../inetutils-ping_2%3a1.9-2_i386.deb) ...
Setting up inetutils-ping (2:1.9-2) ...
root@mydebian:~# ping 8.8.8.8
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: icmp_seq=0 ttl=49 time=172.105 ms
64 bytes from 8.8.8.8: icmp_seq=1 ttl=49 time=111.011 ms
^C--- 8.8.8.8 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
round-trip min/avg/max/stddev = 111.011/141.558/172.105/30.547 ms
root@mydebian:~# 
</code></pre>
]]></content>
  </entry>
  
</feed>
